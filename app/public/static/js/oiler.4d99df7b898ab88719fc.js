(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["oiler"],{"1a7a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper"},[a("div",{staticClass:"form-date",on:{click:e.toggleDate}},[a("div",[a("span",[e._v(e._s(e.timeFormat(e.nowDate,"YYYY年MM月")))]),a("van-icon",{attrs:{name:"arrow-down"}})],1),a("span",[e._v(e._s(e.getTotalLnum))])]),a("van-list",{staticClass:"container common-list",attrs:{finished:e.gasFinished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.gasLoading,callback:function(t){e.gasLoading=t},expression:"gasLoading"}},e._l(e.gasRecord,(function(t,n){return a("van-swipe-cell",{key:n},[a("van-collapse",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("van-collapse-item",{attrs:{name:n},scopedSlots:e._u([{key:"title",fn:function(){return[a("div",{staticClass:"title"},[a("div",[e._v(" "+e._s(t.carNo)+" ")]),a("div",[e._v(" "+e._s(t.oilLnum+"升")+" ")])])]},proxy:!0}],null,!0)},[a("van-field",{attrs:{label:"加油时间",value:e.timeFormat(t.createdAt,"YYYY年MM月DD号 HH:mm:ss"),readonly:""}}),t.oilImg?a("van-field",{attrs:{name:"uploader",label:"加油图片",readonly:""},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-uploader",{attrs:{disabled:"","max-count":"1",deletable:!1},model:{value:t.oilImg,callback:function(a){e.$set(t,"oilImg",a)},expression:"gasItem.oilImg"}})]},proxy:!0}],null,!0)}):e._e()],1)],1)],1)})),1),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.isShowDate,callback:function(t){e.isShowDate=t},expression:"isShowDate"}},[a("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月日","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.confirm,cancel:e.cancel},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1)},r=[],i=a("2909"),c=a("5530"),s=a("1da1"),o=a("d4ec"),u=a("bee2"),l=a("262e"),d=a("2caf"),h=(a("99af"),a("d81d"),a("96cf"),a("9ab4")),f=a("1b40"),m=a("15fd"),g=a("78b1"),p=["perPage","queryPage"];function v(e){return b.apply(this,arguments)}function b(){return b=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,i,c,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.jsonObject,n=a.perPage,r=void 0===n?10:n,i=a.queryPage,c=void 0===i?1:i,s=Object(m["a"])(a,p),e.next=3,g["a"].post("/oil/getCurrentGasSiteRecord?per_page=".concat(r,"&query_page=").concat(c),s);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var O=a("5a0c"),j=a.n(O),y=a("c428"),k=a("77c1"),w=a.n(k),D=a("901e"),x=a.n(D),_=function(e){Object(l["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.isShowDate=!1,e.gasLoading=!1,e.gasFinished=!1,e.gasRecord=[],e.nowDate=new Date,e.activeName=[],e.currentDate=j()().toDate(),e.minDate=j()().subtract(2,"year").toDate(),e.maxDate=j()().toDate(),e.serachObj={perPage:10,queryPage:1,userId:"",carNo:""},e}return Object(u["a"])(a,[{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.serachObj.isWhole=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addOilRecord",value:function(){this.$router.push({path:"/driver-gas-manage"})}},{key:"onLoad",value:function(){this.serachObj.queryPage+=1,this.getAllOilSitesList()}},{key:"getTotalLnum",get:function(){var e;if(null!==(e=this.gasRecord)&&void 0!==e&&e.length){var t=this.gasRecord.reduce((function(e,t){return new x.a(e).plus(t.oilLnum)}),0);return"总共"+t+"升"}return""}},{key:"serachParams",get:function(){return w()(this.serachObj)}},{key:"confirm",value:function(e){this.nowDate=j()(e).toDate(),this.isShowDate=!1,this.serachObj.isWhole=!0,this.getAllOilSitesList()}},{key:"cancel",value:function(){this.isShowDate=!1}},{key:"getDetails",value:function(e){return"".concat(e.carNo," ").concat(this.timeFormat(e.createdAt,"MM月DD号 HH:mm"))}},{key:"timeFormat",value:function(e,t){return j()(e).format(t)}},{key:"toggleDate",value:function(){this.isShowDate=!0}},{key:"getAllOilSitesList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.serachObj.isWhole,this.serachObj.isWhole&&(this.serachObj.perPage=10,this.serachObj.queryPage=1,delete this.serachObj.isWhole),t&&(this.loading=!0),e.prev=3,e.next=6,v({isEncrypt:!0,jsonObject:Object(c["a"])(Object(c["a"])({},this.serachParams),{},{time:j()(this.nowDate).valueOf()})});case 6:a=e.sent,a=a.map((function(e){return e.oilImg&&(e.oilImg=[{url:e.oilImg}]),e})),t&&(this.loading=!1),a&&a.length<this.serachObj.perPage?this.gasFinished=!0:this.gasFinished=!1,this.gasLoading=!1,this.gasRecord=t?a:[].concat(Object(i["a"])(this.gasRecord),Object(i["a"])(a)),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](3),t&&(this.loading=!1),console.log(e.t0,"error");case 18:case"end":return e.stop()}}),e,this,[[3,14]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["c"]);_=Object(h["a"])([Object(f["a"])({components:{Loading:y["a"]}})],_);var L=_,P=L,R=(a("c67a"),a("2877")),S=Object(R["a"])(P,n,r,!1,null,"335a2cfa",null);t["default"]=S.exports},"21a7":function(e,t,a){},"32b7":function(e,t,a){"use strict";a("d04d")},"5ab3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"logo-text"},[e._v(" 车行通 ")]),a("div",{staticClass:"container"},[a("van-cell",{staticClass:"cell-item",attrs:{title:"加油记录","is-link":""},on:{click:function(t){return e.jumpPage("oilerGas")}}}),a("van-cell",{staticClass:"cell-item",attrs:{title:"二维码","is-link":""},on:{click:function(t){return e.jumpPage("oilerPayOilQr")}}}),a("van-cell",{staticClass:"cell-item",attrs:{title:"修改密码","is-link":""},on:{click:function(t){return e.jumpPage("password")}}})],1),a("LoginOut")],1)},r=[],i=a("d4ec"),c=a("bee2"),s=a("262e"),o=a("2caf"),u=a("9ab4"),l=a("1b40"),d=a("5a0c"),h=a.n(d),f=a("901e"),m=a("f1e3"),g=function(e){Object(s["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.gasSiteRecord=[],e}return Object(c["a"])(a,[{key:"totalLum",get:function(){var e=this.gasSiteRecord.reduce((function(e,t){return new f["BigNumber"](e).plus(t.oilLnum)}),0);return e}},{key:"timeFormat",value:function(e){return h()(e).format("YYYY-MM-DD HH:mm:ss")}},{key:"jumpPage",value:function(e){this.$router.push({name:e})}}]),a}(l["c"]);g=Object(u["a"])([Object(l["a"])({components:{LoginOut:m["a"]}})],g);var p=g,v=p,b=(a("a6de"),a("2877")),O=Object(b["a"])(v,n,r,!1,null,"d7af58cc",null);t["default"]=O.exports},7238:function(e,t,a){},"7aa2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pay-oil-qr"},[a("vue-qr",{attrs:{colorDark:"#4994df",text:e.getQrInfo(),size:300}})],1)},r=[],i=a("d4ec"),c=a("bee2"),s=a("262e"),o=a("2caf"),u=a("9ab4"),l=a("1b40"),d=a("c50c"),h=a("658f"),f=a.n(h),m=function(e){Object(s["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(i["a"])(this,a),t.apply(this,arguments)}return Object(c["a"])(a,[{key:"getQrInfo",value:function(){var e=Object(d["a"])("userInfo");return"https://www.cxt.net.cn/#/driver-gas-manage?toPage=driverGasManage&userId="+e._id}}]),a}(l["c"]);m=Object(u["a"])([Object(l["a"])({components:{VueQr:f.a}})],m);var g=m,p=g,v=(a("32b7"),a("2877")),b=Object(v["a"])(p,n,r,!1,null,"600a7246",null);t["default"]=b.exports},a6de:function(e,t,a){"use strict";a("21a7")},c67a:function(e,t,a){"use strict";a("7238")},d04d:function(e,t,a){}}]);