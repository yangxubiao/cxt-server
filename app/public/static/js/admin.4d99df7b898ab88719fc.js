(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"0215":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return u}));var n=a("1da1"),r=(a("96cf"),a("78b1"));function i(e){return s.apply(this,arguments)}function s(){return s=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post("/cars/create",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function c(){return o.apply(this,arguments)}function o(){return o=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].get("/cars/findAllCarsList");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].delete("/cars/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}},"0a8c":function(e,t,a){},"0cb0":function(e,t,a){},"0e06":function(e,t,a){},1355:function(e,t,a){"use strict";a("d5e2")},"18b7":function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return u}));var n=a("15fd"),r=a("1da1"),i=(a("96cf"),a("99af"),a("78b1")),s=["perPage","queryPage"];function c(e){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,c,o,u,l,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.jsonObject,r=a.perPage,c=void 0===r?10:r,o=a.queryPage,u=void 0===o?1:o,l=Object(n["a"])(a,s),e.next=3,i["a"].post("/oil/getCurrentCarOwnerGasRecord?per_page=".concat(c,"&query_page=").concat(u),l);case 3:return h=e.sent,e.abrupt("return",h);case 5:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/oil/divideOil",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}},"19ce":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper common-list"},e._l(e.summaryList,(function(t,n){return a("van-swipe-cell",{key:n,scopedSlots:e._u([{key:"right",fn:function(){},proxy:!0}],null,!0)},[a("van-cell",{attrs:{title:t.leaderName,label:t.carName}},[e.isSmallMinimumLitres(t.avaliableLnum)?a("div",{staticClass:"min-lnum"},[e._v(" "+e._s(t.avaliableLnum+"升")+" ")]):a("div",{staticClass:"default-lnum"},[e._v(" "+e._s(t.avaliableLnum+"升")+" ")])])],1)})),1)},r=[],i=a("1da1"),s=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),l=(a("96cf"),a("a9e3"),a("9ab4")),h=a("1b40"),f=a("4e5f"),m=a("c428"),d=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.summaryList=[],e.loading=!0,e}return Object(c["a"])(a,[{key:"isSmallMinimumLitres",value:function(e){return Number(e)<"500"}},{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["a"])();case 2:this.summaryList=e.sent,this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(h["c"]);d=Object(l["a"])([Object(h["a"])({components:{Loading:m["a"]}})],d);var p=d,b=p,g=(a("d0bc"),a("2877")),v=Object(g["a"])(b,n,r,!1,null,"39868c96",null);t["default"]=v.exports},"1a0c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("van-form",{staticClass:"container",on:{submit:e.throttleSubmit}},[a("van-field",{staticClass:"field",attrs:{name:"name",label:"加油点名称",placeholder:"请输入加油点名称",rules:[{required:!0,message:"请输入加油点名称"}]},model:{value:e.formObj.name,callback:function(t){e.$set(e.formObj,"name",t)},expression:"formObj.name"}}),a("van-field",{staticClass:"field",attrs:{type:"number",label:"代加费",placeholder:"请输入代加费",rules:[{required:!0,message:"请输入代加费"}]},scopedSlots:e._u([{key:"extra",fn:function(){return[e._v(" 毛 ")]},proxy:!0}]),model:{value:e.formObj.proxyFee,callback:function(t){e.$set(e.formObj,"proxyFee",t)},expression:"formObj.proxyFee"}}),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1),a("JumpToPageVue",{attrs:{pageInfo:e.pageInfo}})],1)],1)},r=[],i=a("1da1"),s=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),l=(a("96cf"),a("a9e3"),a("99af"),a("b0c0"),a("9ab4")),h=a("1b40"),f=a("208a"),m=a("b047"),d=a.n(m),p=a("bd9f"),b=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.formObj={proxyFee:"",name:""},e.throttleSubmit=d()((function(){e.onSubmit()}),500),e}return Object(c["a"])(a,[{key:"pageInfo",get:function(){return{name:"adminOil",title:"加油点记录"}}},{key:"onSubmit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Number(this.formObj.proxyFee)<=0)){e.next=3;break}return this.$toast("代加费不能小于0"),e.abrupt("return");case 3:this.$dialog.confirm({title:"",message:'<div>确认要添加: <span class="focus-text">'.concat(this.formObj.name,'</span></div><div>代加费为: <span class="focus-text">').concat(this.formObj.proxyFee,"</span> 毛 ?</div>"),beforeClose:this.beforeCloseDialog});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeCloseDialog",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"!==t){e.next=14;break}return e.prev=1,e.next=4,Object(f["b"])({isEncrypt:!0,jsonObject:this.formObj});case 4:this.$toast("添加成功"),a(),this.$router.push({name:"adminOil"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),a();case 12:e.next=15;break;case 14:a();case 15:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t,a){return e.apply(this,arguments)}return t}()}]),a}(h["c"]);b=Object(l["a"])([Object(h["a"])({components:{JumpToPageVue:p["a"]}})],b);var g=b,v=g,O=(a("3c16"),a("f36a"),a("2877")),j=Object(O["a"])(v,n,r,!1,null,"3d8c2588",null);t["default"]=j.exports},"1b11":function(e,t,a){"use strict";a("58e0")},"1c5c":function(e,t,a){"use strict";a("33cd")},"1eb3":function(e,t,a){},2728:function(e,t,a){e.exports=a.p+"static/img/users.0992366f.svg"},"28ab":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper common-list"},[e._l(e.allCarsList,(function(t,n){return a("van-swipe-cell",{key:n,scopedSlots:e._u([{key:"right",fn:function(){},proxy:!0}],null,!0)},[a("van-cell",{attrs:{title:t.name,value:"代价费: "+t.proxyFee+"毛"}})],1)})),a("div",{staticClass:"tips"},[e._v(" 没有更多了, "),a("span",{staticClass:"add-car",on:{click:e.addCar}},[e._v("点击这里添加更多车队")])])],2)},r=[],i=a("1da1"),s=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),l=(a("b0c0"),a("96cf"),a("9ab4")),h=a("1b40"),f=a("0215"),m=a("c428"),d=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.allCarsList=[],e.loading=!0,e}return Object(c["a"])(a,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["c"])();case 2:t=e.sent,this.allCarsList=t,this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAllCarsList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["c"])();case 2:t=e.sent,this.allCarsList=t;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"delCarItemById",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$dialog.confirm({title:"删除用户",message:"确定要删除 ".concat(t.name," 吗 ?")}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["b"])(t._id);case 2:a.$toast("删除成功"),a.getAllCarsList();case 4:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addCar",value:function(){this.$router.push({path:"/admin-add-car-owner"})}}]),a}(h["c"]);d=Object(l["a"])([Object(h["a"])({components:{Loading:m["a"]}})],d);var p=d,b=p,g=(a("1b11"),a("2877")),v=Object(g["a"])(b,n,r,!1,null,"7b9f0394",null);t["default"]=v.exports},2953:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("van-grid",{attrs:{"column-num":3,gutter:20}},e._l(e.grids,(function(t,n){return a("van-grid-item",{key:n,attrs:{icon:t.img,text:t.name},on:{click:function(a){return e.jumpPage(t.page)}}})})),1),a("div",{staticClass:"password"},[a("van-cell",{attrs:{title:"修改密码","is-link":""},on:{click:function(t){return e.jumpPage("password")}}})],1),a("LoginOut")],1)},r=[],i=a("d4ec"),s=a("bee2"),c=a("262e"),o=a("2caf"),u=a("9ab4"),l=a("1b40"),h=a("f1e3"),f=function(e){Object(c["a"])(n,e);var t=Object(o["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.usersIcon=a("2728"),e.oilsIcon=a("d831"),e.recordsIcon=a("8baf"),e.trucksIcon=a("50f8"),e.chargesIcon=a("5d1b"),e.oilCleanIcon=a("c03b"),e.oilQuantityMonitorIcon=a("97b8"),e.grids=[{name:"用户",page:"adminManageUsers",img:e.usersIcon},{name:"车队",page:"adminAddCarOwner",img:e.trucksIcon},{name:"加油",page:"adminAddOil",img:e.oilsIcon},{name:"充值页",page:"adminManageRecharge",img:e.chargesIcon},{name:"加油记录页",page:"adminGas",img:e.recordsIcon},{name:" 进油记录页",page:"adminOilCleanManage",img:e.oilCleanIcon},{name:" 油量监控",page:"adminOilQuantityMonitor",img:e.oilQuantityMonitorIcon}],e.pageMark="",e}return Object(s["a"])(n,[{key:"jumpPage",value:function(e){this.$router.push({name:e})}}]),n}(l["c"]);f=Object(u["a"])([Object(l["a"])({components:{LoginOut:h["a"]}})],f);var m=f,d=m,p=(a("9bea"),a("2877")),b=Object(p["a"])(d,n,r,!1,null,"f297e0bc",null);t["default"]=b.exports},"33cd":function(e,t,a){},"360b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.pageLoading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-form",{staticClass:"container",on:{submit:e.throttleSubmit}},[a("van-field",{staticClass:"field",attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.name,label:"车队负责人",placeholder:"点击选择车队负责人",rules:[{required:!0,message:"请选择车队负责人"}]},on:{click:function(t){return e.handlerPicker("1")}}}),a("van-field",{staticClass:"field",attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.carName,label:"车队名",placeholder:"车队名",rules:[{required:!0,message:"请选择车队名"}]},on:{click:function(t){return e.handlerPicker("2")}}}),a("van-field",{staticClass:"field",attrs:{type:"number",label:"升数",placeholder:"请输入升数",rules:[{required:!0,message:"请输入升数"}]},on:{input:e.chargeLnumInput},model:{value:e.formObj.chargeLnum,callback:function(t){e.$set(e.formObj,"chargeLnum",t)},expression:"formObj.chargeLnum"}}),a("van-field",{staticClass:"field",attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.settleName,label:"结清状态",placeholder:"点击选择结清状态",rules:[{required:!0,message:"请选择结清状态"}]},on:{click:function(t){return e.handlerPicker("3")}}}),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:e.dynamicColumns,loading:e.loading},on:{confirm:e.onConfirm,cancel:function(t){e.showPicker=!1}}})],1),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1),a("JumpToPageVue",{attrs:{pageInfo:e.pageInfo}})],1)],1)},r=[],i=a("5530"),s=a("1da1"),c=a("d4ec"),o=a("bee2"),u=a("262e"),l=a("2caf"),h=(a("96cf"),a("caad"),a("d81d"),a("b0c0"),a("a9e3"),a("99af"),a("d3b7"),a("25f0"),a("9ab4")),f=a("1b40"),m=a("b8f0"),d=a("901e"),p=a("3b5d"),b=a("b047"),g=a.n(b),v=a("bd9f"),O=a("c428"),j=function(e){Object(u["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.columns=[],e.loading=!1,e.pageLoading=!0,e.throttleSubmit=g()((function(){e.onSubmit()}),500),e.showPicker=!1,e.formObj={name:"",nameId:"",carName:"",carId:"",proxyFee:"",chargeTunnage:"",chargeLnum:"",settleName:"",settleStatus:""},e}return Object(o["a"])(a,[{key:"pageInfo",get:function(){return{name:"adminRecharge",title:"充值记录"}}},{key:"defaultRoleColumns",value:function(){return[{text:"未结清",value:{settleName:"未结清",settleStatus:"0"}},{text:"已结清",value:{settleName:"已结清",settleStatus:"1"}}]}},{key:"dynamicColumns",get:function(){return this.columns}},{key:"handlerPicker",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.columns=[],this.loading=!0,this.showPicker=!this.showPicker,a=this.defaultRoleColumns(),!["1","2"].includes(t)){e.next=9;break}return e.next=7,Object(m["c"])();case 7:a=e.sent,a=a.map((function(e){return{text:"1"===t?e.name:e.carName,value:{name:e.name,nameId:e._id,carName:e.carName,carId:e.carId,proxyFee:e.carProxyFee}}}));case 9:this.columns=a,this.loading=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"scene",get:function(){return this.$route.query.scene}},{key:"onSubmit",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Number(this.formObj.chargeLnum)<=0)){e.next=3;break}return this.$toast("吨数不能小于0"),e.abrupt("return");case 3:this.$dialog.confirm({title:"",message:'<div>确认要给: <span class="focus-text">'.concat(this.formObj.carName,"</span></div><div>").concat("update"!==this.scene?"充值":"修改为",': <span class="focus-text">').concat(this.formObj.chargeLnum,"</span>升吗?</div>"),beforeClose:this.beforeCloseDialog});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeCloseDialog",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"!==t){e.next=22;break}if(e.prev=1,"update"===this.scene){e.next=9;break}return e.next=5,Object(p["a"])({isEncrypt:!0,jsonObject:this.formObj});case 5:e.sent,this.$toast("添加成功"),e.next=13;break;case 9:return e.next=11,Object(p["e"])({isEncrypt:!0,jsonObject:this.formObj});case 11:e.sent,this.$toast("编辑成功");case 13:a(),this.$router.push({name:"adminRecharge"}),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](1),a();case 20:e.next=23;break;case 22:a();case 23:case"end":return e.stop()}}),e,this,[[1,17]])})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"onConfirm",value:function(e){this.formObj=Object(i["a"])(Object(i["a"])({},this.formObj),e.value),this.showPicker=!this.showPicker}},{key:"chargeLnumInput",value:function(e){this.formObj.chargeTunnage=new d["BigNumber"](e).dividedBy("1180").toString()}},{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("update"!==this.scene){e.next=5;break}return e.next=3,Object(p["d"])(this.$route.query.id);case 3:t=e.sent,this.formObj=t;case 5:this.pageLoading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["c"]);j=Object(h["a"])([Object(f["a"])({components:{JumpToPageVue:v["a"],Loading:O["a"]}})],j);var y=j,k=y,x=(a("ee4b"),a("f619"),a("2877")),w=Object(x["a"])(k,n,r,!1,null,"63b39de0",null);t["default"]=w.exports},"3b5d":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return h})),a.d(t,"d",(function(){return m})),a.d(t,"e",(function(){return p}));var n=a("15fd"),r=a("1da1"),i=(a("99af"),a("96cf"),a("78b1")),s=["perPage","queryPage"];function c(e){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/recharges/createdRecharge",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,c,o,u,l,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.jsonObject,r=a.perPage,c=void 0===r?10:r,o=a.queryPage,u=void 0===o?1:o,l=Object(n["a"])(a,s),e.next=3,i["a"].post("/recharges/findAllRechargesList?per_page=".concat(c,"&query_page=").concat(u),l);case 3:return h=e.sent,e.abrupt("return",h);case 5:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].delete("/recharges/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("/recharges/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].put("/recharges/updateRecharge",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}},"3c16":function(e,t,a){"use strict";a("0cb0")},4416:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("d3b7"),a("25f0"),a("b680");var n=a("901e"),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return new n["BigNumber"](e||0).toFixed(t).toString()}},"498a":function(e,t,a){"use strict";var n=a("23e7"),r=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},"50e5":function(e,t,a){},"50f8":function(e,t,a){e.exports=a.p+"static/img/trucks.92a3cc18.svg"},"540e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("van-form",{staticClass:"container",on:{submit:e.throttleSubmit}},[a("van-field",{staticClass:"field",attrs:{name:"name",label:"车队名",placeholder:"请输入车队名",rules:[{required:!0,message:"请输入车队名"}]},model:{value:e.formObj.name,callback:function(t){e.$set(e.formObj,"name",t)},expression:"formObj.name"}}),a("van-field",{staticClass:"field",attrs:{type:"number",label:"代加费",placeholder:"请输入代加费",rules:[{required:!0,message:"请输入代加费"}]},scopedSlots:e._u([{key:"extra",fn:function(){return[e._v(" 毛 ")]},proxy:!0}]),model:{value:e.formObj.proxyFee,callback:function(t){e.$set(e.formObj,"proxyFee",t)},expression:"formObj.proxyFee"}}),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1),a("JumpToPageVue",{attrs:{pageInfo:e.pageInfo}})],1)],1)},r=[],i=a("1da1"),s=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),l=(a("96cf"),a("a9e3"),a("99af"),a("b0c0"),a("9ab4")),h=a("1b40"),f=a("0215"),m=a("b047"),d=a.n(m),p=a("bd9f"),b=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.formObj={proxyFee:"",name:""},e.throttleSubmit=d()((function(){e.onSubmit()}),500),e}return Object(c["a"])(a,[{key:"pageInfo",get:function(){return{name:"adminCarOwners",title:"车队记录"}}},{key:"onSubmit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Number(this.formObj.proxyFee)<=0)){e.next=3;break}return this.$toast("代加费不能小于0"),e.abrupt("return");case 3:this.$dialog.confirm({title:"",message:'<div>确认要添加: <span class="focus-text">'.concat(this.formObj.name,'</span></div><div>代加费为: <span class="focus-text">').concat(this.formObj.proxyFee,"</span> 毛 ?</div>"),beforeClose:this.beforeCloseDialog});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeCloseDialog",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"!==t){e.next=14;break}return e.prev=1,e.next=4,Object(f["a"])({isEncrypt:!0,jsonObject:this.formObj});case 4:this.$toast("添加成功"),a(),this.$router.push({name:"adminCarOwners"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),a();case 12:e.next=15;break;case 14:a();case 15:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t,a){return e.apply(this,arguments)}return t}()}]),a}(h["c"]);b=Object(l["a"])([Object(h["a"])({components:{JumpToPageVue:p["a"]}})],b);var g=b,v=g,O=(a("bc10"),a("b483"),a("2877")),j=Object(O["a"])(v,n,r,!1,null,"4a7f9f4a",null);t["default"]=j.exports},"58e0":function(e,t,a){},"5ccd":function(e,t,a){},"5d1b":function(e,t,a){e.exports=a.p+"static/img/charges.d2fb07ce.svg"},"66fb":function(e,t,a){"use strict";a("f286")},"6db5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-dropdown-menu",[a("van-dropdown-item",{attrs:{options:e.roleOption},on:{change:e.roleChange},model:{value:e.roleVlue,callback:function(t){e.roleVlue=t},expression:"roleVlue"}})],1),a("van-list",{staticClass:"common-list",attrs:{finished:e.userFinished},on:{load:e.onLoad},scopedSlots:e._u([{key:"finished",fn:function(){return[e._v(" 没有更多了, "),a("span",{staticClass:"add-user",on:{click:e.addUser}},[e._v("点击这里添加更多用户")])]},proxy:!0}]),model:{value:e.userLoading,callback:function(t){e.userLoading=t},expression:"userLoading"}},e._l(e.usersList,(function(t,n){return a("van-swipe-cell",{key:n,scopedSlots:e._u([{key:"right",fn:function(){return[a("van-button",{attrs:{square:"",type:"primary",text:"编辑"},on:{click:function(a){return e.editUserItemById(t._id)}}})]},proxy:!0}],null,!0)},[a("van-cell",{attrs:{title:t.name}},[a("a",{attrs:{href:"tel:"+t.phone}},[e._v(e._s(t.phone))])])],1)})),1)],1)},r=[],i=a("2909"),s=a("1da1"),c=a("d4ec"),o=a("bee2"),u=a("262e"),l=a("2caf"),h=(a("96cf"),a("99af"),a("b0c0"),a("9ab4")),f=a("1b40"),m=a("b8f0"),d=a("c428"),p=a("77c1"),b=a.n(p),g=function(e){Object(u["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.usersList=[],e.roleVlue="",e.loading=!0,e.userLoading=!1,e.userFinished=!1,e.serachform={perPage:10,queryPage:1,roleNo:""},e.roleOption=[{text:"全部",value:""},{text:"管理员",value:"0"},{text:"车队",value:"1"},{text:"驾驶员",value:"2"},{text:"加油工",value:"3"}],e}return Object(o["a"])(a,[{key:"onLoad",value:function(){this.serachform.queryPage+=1,this.getAllUserList()}},{key:"serachParams",get:function(){return b()(this.serachform)}},{key:"getAllUserList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m["e"])(this.serachParams);case 3:t=e.sent,t&&t.length<this.serachform.perPage?this.userFinished=!0:this.userFinished=!1,this.userLoading=!1,this.usersList=[].concat(Object(i["a"])(this.usersList),Object(i["a"])(t)),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0,"error");case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"roleChange",value:function(e){this.serachform.roleNo=e,this.getUsersByCondition({isWhole:!0,roleNo:e})}},{key:"getUsersByCondition",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isWhole&&(this.serachform={perPage:10,queryPage:1,roleNo:this.serachform.roleNo}),e.next=3,Object(m["e"])(this.serachParams);case 3:a=e.sent,a&&a.length<this.serachform.perPage?this.userFinished=!0:this.userFinished=!1,this.usersList=a;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delUserItemById",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$dialog.confirm({title:"删除用户",message:"确定要删除 ".concat(t.name," 用户吗 ?")}).then(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["b"])(t._id);case 2:a.$toast("删除成功"),a.getUsersByCondition({isWhole:!0});case 4:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["e"])(this.serachParams);case 2:t=e.sent,this.usersList=t,this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"editUserItemById",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push({path:"/admin-manage-users",query:{id:t,scene:"update"}});case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addUser",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push({path:"/admin-manage-users",query:{scene:"add"}});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["c"]);g=Object(h["a"])([Object(f["a"])({components:{Loading:d["a"]}})],g);var v=g,O=v,j=(a("1355"),a("2877")),y=Object(j["a"])(O,n,r,!1,null,"691d7843",null);t["default"]=y.exports},7219:function(e,t,a){},"7d7e":function(e,t,a){"use strict";a("a224")},"7f37":function(e,t,a){"use strict";a("0a8c")},"81f2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-dropdown-menu",[a("van-dropdown-item",{key:1,attrs:{options:e.settleOption},on:{change:e.settleChange},model:{value:e.settleCalue,callback:function(t){e.settleCalue=t},expression:"settleCalue"}}),a("van-dropdown-item",{key:2,attrs:{options:e.carsOption},on:{change:e.carChange},model:{value:e.carValue,callback:function(t){e.carValue=t},expression:"carValue"}})],1),a("div",{staticClass:"form-date",on:{click:e.toggleDate}},[a("div",[a("span",[e._v(e._s(e.timeFormat(e.nowDate,"YYYY年MM月")))]),a("van-icon",{attrs:{name:"arrow-down"}})],1),a("span",[e._v(e._s(e.getProxyPree))])]),a("van-list",{staticClass:"container common-list",attrs:{finished:e.rechargeFinished},on:{load:e.onLoad},scopedSlots:e._u([{key:"finished",fn:function(){return[e._v(" 没有更多了, "),a("span",{staticClass:"add-recharge",on:{click:e.manageRearge}},[e._v("点击这里充值")])]},proxy:!0}]),model:{value:e.rechargeLoading,callback:function(t){e.rechargeLoading=t},expression:"rechargeLoading"}},e._l(e.rechargesList,(function(t,n){return a("van-swipe-cell",{key:n,scopedSlots:e._u([{key:"right",fn:function(){return[a("div",{staticClass:"more"},[a("van-button",{attrs:{square:"",type:"primary",text:"编辑"},on:{click:function(a){return e.editReachrgeItemById(t._id)}}})],1)]},proxy:!0}],null,!0)},[a("van-cell",{attrs:{title:t.name,value:e.floatByNum(t.chargeTunnage)+"吨",label:e.timeFormat(t.createdAt,"YYYY-MM-DD HH:mm:ss")}})],1)})),1),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.isShowDate,callback:function(t){e.isShowDate=t},expression:"isShowDate"}},[a("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月日","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.confirm,cancel:e.cancel},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1)},r=[],i=a("5530"),s=a("1da1"),c=a("2909"),o=a("d4ec"),u=a("bee2"),l=a("262e"),h=a("2caf"),f=(a("96cf"),a("99af"),a("d81d"),a("b0c0"),a("4de4"),a("d3b7"),a("25f0"),a("7db0"),a("9ab4")),m=a("1b40"),d=a("3b5d"),p=a("5a0c"),b=a.n(p),g=a("0215"),v=a("901e"),O=a("c428"),j=a("77c1"),y=a.n(j),k=a("4416"),x=function(e){Object(l["a"])(a,e);var t=Object(h["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!0,e.isShowDate=!1,e.rechargeLoading=!1,e.rechargeFinished=!1,e.settleCalue="",e.nowDate=new Date,e.carValue="",e.currentDate=b()().toDate(),e.minDate=b()().subtract(2,"year").toDate(),e.maxDate=b()().toDate(),e.settleOption=[{text:"结清状态",value:""},{text:"未结清",value:"0"},{text:"已结清",value:"1"}],e.serachObj={perPage:10,queryPage:1,settleName:"",settleStatus:"",carName:"",carId:""},e.rechargesList=[],e.carsList=[],e}return Object(u["a"])(a,[{key:"getProxyPree",get:function(){return"1"===this.settleCalue?"":"应还代加费".concat(this.shouldRepayAmount,"元")}},{key:"toggleDate",value:function(){this.isShowDate=!0}},{key:"floatByNum",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Object(k["a"])(e,t)}},{key:"onLoad",value:function(){this.serachObj.queryPage+=1,this.getAllRechargesList()}},{key:"carsOption",get:function(){return[{text:"车队名称",value:""}].concat(Object(c["a"])(this.carsList.map((function(e){return{text:e.name,value:e._id}}))))}},{key:"totalTunnage",get:function(){var e=this.rechargesList.reduce((function(e,t){return new v["BigNumber"](e).plus(t.chargeTunnage)}),0);return this.floatByNum(e)}},{key:"shouldRepayAmount",get:function(){var e=this.rechargesList.filter((function(e){return"0"===e.settleStatus})).reduce((function(e,t){return new v["BigNumber"](e).plus(new v["BigNumber"](t.chargeLnum).multipliedBy(t.proxyFee).div(10).toString()).toString()}),0);return this.floatByNum(e,0)}},{key:"manageRearge",value:function(){this.$router.push({path:"/admin-manage-recharge",query:{scene:"add"}})}},{key:"confirm",value:function(e){this.nowDate=b()(e).toDate(),this.isShowDate=!1,this.serachObj.isWhole=!0,this.getAllRechargesList()}},{key:"cancel",value:function(){this.isShowDate=!1}},{key:"timeFormat",value:function(e,t){return b()(e).format(t)}},{key:"serachParams",get:function(){return y()(this.serachObj)}},{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.serachObj.isWhole=!0,this.getAllRechargesList(),e.next=4,Object(g["c"])();case 4:this.carsList=e.sent;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"delRechargeItemById",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$dialog.confirm({title:"删除用户",message:"确定要删除 ".concat(t.name," 吗 ?")}).then(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["b"])(t._id);case 2:a.$toast("删除成功"),a.serachObj.isWhole=!0,a.getAllRechargesList();case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAllRechargesList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"结清状态"===this.serachObj.settleName&&delete this.serachObj.settleName,"车队名称"===this.serachObj.carName&&delete this.serachObj.carName,t=this.serachObj.isWhole,this.serachObj.isWhole&&(this.serachObj.perPage=10,this.serachObj.queryPage=1,delete this.serachObj.isWhole),t&&(this.loading=!0),e.prev=5,e.next=8,Object(d["c"])({isEncrypt:!0,jsonObject:Object(i["a"])(Object(i["a"])({},this.serachParams),{},{time:b()(this.nowDate).valueOf()})});case 8:a=e.sent,t&&(this.loading=!1),a&&a.length<this.serachObj.perPage?this.rechargeFinished=!0:this.rechargeFinished=!1,this.rechargeLoading=!1,this.rechargesList=t?a:[].concat(Object(c["a"])(this.rechargesList),Object(c["a"])(a)),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](5),t&&(this.loading=!1),console.log(e.t0,"error");case 19:case"end":return e.stop()}}),e,this,[[5,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"editReachrgeItemById",value:function(e){this.$router.push({path:"/admin-manage-recharge",query:{id:e,scene:"update"}})}},{key:"settleChange",value:function(e){var t=this.settleOption.find((function(t){return t.value===e}))||{};t&&(t={settleName:t.text,settleStatus:t.value}),this.serachObj=Object(i["a"])(Object(i["a"])(Object(i["a"])({},this.serachObj),t),{},{isWhole:!0}),this.getAllRechargesList()}},{key:"carChange",value:function(e){var t=this.carsList.find((function(t){return t._id===e}))||{};t&&(t={carName:t.name,carId:t._id}),this.serachObj=Object(i["a"])(Object(i["a"])(Object(i["a"])({},this.serachObj),t),{},{isWhole:!0}),this.getAllRechargesList()}}]),a}(m["c"]);x=Object(f["a"])([Object(m["a"])({components:{Loading:O["a"]}})],x);var w=x,R=w,L=(a("82f0"),a("2877")),C=Object(L["a"])(R,n,r,!1,null,"43becff2",null);t["default"]=C.exports},"82f0":function(e,t,a){"use strict";a("0e06")},"83b1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.pageLoading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-form",{staticClass:"container",on:{submit:e.throttleSubmit}},[a("van-field",{attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.oilName,label:"加油点",placeholder:"点击选择加油点",rules:[{required:!0,message:"请选择加油点"}]},on:{click:e.handlerPicker}}),a("van-field",{attrs:{type:"number",label:"加油升数",placeholder:"请输入加油升数",rules:[{required:!0,message:"请输入加油升数"}]},model:{value:e.formObj.oilLnum,callback:function(t){e.$set(e.formObj,"oilLnum",t)},expression:"formObj.oilLnum"}}),a("van-field",{attrs:{name:"uploader",label:"加油图片"},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-uploader",{attrs:{"max-count":"1","after-read":e.afterRead},model:{value:e.uploader,callback:function(t){e.uploader=t},expression:"uploader"}})]},proxy:!0}])}),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:e.dynamicColumns,loading:e.loading},on:{confirm:e.onConfirm,cancel:function(t){e.showPicker=!1}}})],1),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1),a("JumpToPageVue",{attrs:{pageInfo:e.pageInfo}})],1)],1)},r=[],i=a("15fd"),s=a("5530"),c=a("1da1"),o=a("d4ec"),u=a("bee2"),l=a("262e"),h=a("2caf"),f=(a("96cf"),a("a9e3"),a("99af"),a("d3b7"),a("25f0"),a("b680"),a("d81d"),a("b0c0"),a("9ab4")),m=a("1b40"),d=a("208a"),p=a("8f93"),b=a("b047"),g=a.n(b),v=a("bd9f"),O=a("c428"),j=a("901e"),y=a.n(j),k=a("b8f0"),x=["updatedAt","createdAt"],w=function(e){Object(l["a"])(a,e);var t=Object(h["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.pageLoading=!0,e.showPicker=!1,e.loading=!1,e.columns=[],e.uploader=[],e.uploader1=[],e.userInfo={},e.lastOilLum="0",e.value="",e.formObj={userId:"",carNo:"",carName:"",carId:"",carProxyFee:"",oilName:"",oilId:"",oilProxyFee:"",oilLnum:"",oilImg:"",_id:"",gasMode:""},e.throttleSubmit=g()((function(){e.onSubmit()}),500),e}return Object(u["a"])(a,[{key:"pageInfo",get:function(){return{name:"adminGas",title:"加油记录"}}},{key:"dynamicColumns",get:function(){return this.columns}},{key:"onSubmit",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Number(this.formObj.oilLnum)<=0)){e.next=3;break}return this.$toast("加油升数不能小于0"),e.abrupt("return");case 3:if(this.uploader.length||(this.formObj.oilImg=""),"divide"!==(null===(t=this.formObj)||void 0===t?void 0:t.gasMode)){e.next=8;break}if(!(new y.a((null===(a=this.userInfo)||void 0===a?void 0:a.availableLum)||0).plus(this.lastOilLum).minus(this.formObj.oilLnum).toNumber()<0)){e.next=8;break}return this.$toast("可用升数不足，请先充值 !"),e.abrupt("return");case 8:this.$dialog.confirm({title:"",message:'<div>加油点: <span class="oil-text">'.concat(this.formObj.oilName,' </span></div><div>加油升数: <span class="oil-text">').concat(this.formObj.oilLnum,"</span> 升 ?</div>"),beforeClose:this.beforeCloseDialog});case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeCloseDialog",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"!==t){e.next=18;break}if(e.prev=1,"divide"!==(null===(n=this.userInfo)||void 0===n?void 0:n.gasMode)){e.next=6;break}return e.next=5,Object(k["i"])({isEncrypt:!0,jsonObject:{_id:null===(r=this.userInfo)||void 0===r?void 0:r._id,availableLum:new y.a((null===(i=this.userInfo)||void 0===i?void 0:i.availableLum)||0).plus(this.lastOilLum).minus(this.formObj.oilLnum).toFixed(2).toString()}});case 5:e.sent;case 6:return e.next=8,Object(d["k"])({isEncrypt:!0,jsonObject:this.formObj});case 8:this.$toast("修改成功"),a(),this.$router.push({name:"adminGas"}),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),a();case 16:e.next=19;break;case 18:a();case 19:case"end":return e.stop()}}),e,this,[[1,13]])})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"afterRead",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.status="uploading",t.message="上传中...",a=new FormData,e.next=5,this.$compression(t.file);case 5:return n=e.sent,a.append("file",n.file),e.next=9,Object(p["a"])(a);case 9:r=e.sent,t.status="done",this.formObj.oilImg=r.url;case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onConfirm",value:function(e){this.formObj=Object(s["a"])(Object(s["a"])({},this.formObj),e.value),this.showPicker=!this.showPicker}},{key:"handlerPicker",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.columns=[],this.loading=!0,this.showPicker=!this.showPicker,e.next=5,Object(d["h"])();case 5:t=e.sent,t=t.map((function(e){return{text:e.name,value:{oilName:e.name,oilId:e._id,oilProxyFee:e.proxyFee}}})),this.columns=t,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["j"])(this.$route.query.id);case 2:return t=e.sent,t.updatedAt,t.createdAt,a=Object(i["a"])(t,x),this.lastOilLum=a.oilLnum,e.next=7,Object(k["f"])(t.userId);case 7:this.userInfo=e.sent,a.oilImg&&(this.uploader=[{url:a.oilImg}]),this.formObj=a,this.pageLoading=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(m["c"]);w=Object(f["a"])([Object(m["a"])({components:{JumpToPageVue:v["a"],Loading:O["a"]}})],w);var R=w,L=R,C=(a("9733"),a("9cb4"),a("2877")),P=Object(C["a"])(L,n,r,!1,null,"67bf9ce4",null);t["default"]=P.exports},"84e5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.pageLoading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-form",{staticClass:"container",on:{submit:e.throttleSubmit}},[a("van-field",{attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.name,label:"加油点负责人",placeholder:"点击选择加油点负责人",rules:[{required:!0,message:"请选择加油点负责人"}]},on:{click:function(t){return e.handlerPicker("1")}}}),a("van-field",{attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.oilName,label:"加油点名称",placeholder:"加油点名称",rules:[{required:!0,message:"请选择加油点名称"}]},on:{click:function(t){return e.handlerPicker("2")}}}),a("van-field",{attrs:{type:"number",label:"吨数",placeholder:"请输入吨数",rules:[{required:!0,message:"请输入吨数"}]},on:{input:e.chargeTunnageInput},model:{value:e.formObj.chargeTunnage,callback:function(t){e.$set(e.formObj,"chargeTunnage",t)},expression:"formObj.chargeTunnage"}}),a("van-field",{attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.settleName,label:"结清状态",placeholder:"点击选择结清状态",rules:[{required:!0,message:"请选择结清状态"}]},on:{click:function(t){return e.handlerPicker("3")}}}),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:e.dynamicColumns,loading:e.loading},on:{confirm:e.onConfirm,cancel:function(t){e.showPicker=!1}}})],1),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1),a("JumpToPageVue",{attrs:{pageInfo:e.pageInfo}})],1)],1)},r=[],i=a("5530"),s=a("1da1"),c=a("d4ec"),o=a("bee2"),u=a("262e"),l=a("2caf"),h=(a("96cf"),a("caad"),a("d81d"),a("b0c0"),a("a9e3"),a("d3b7"),a("25f0"),a("9ab4")),f=a("1b40"),m=a("b8f0"),d=a("901e"),p=a("208a"),b=a("b047"),g=a.n(b),v=a("bd9f"),O=a("c428"),j=function(e){Object(u["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.pageLoading=!0,e.columns=[],e.loading=!1,e.throttleSubmit=g()((function(){e.onSubmit()}),500),e.showPicker=!1,e.formObj={name:"",nameId:"",oilName:"",oilId:"",proxyFee:"",chargeTunnage:"",chargeLnum:"",settleName:"",settleStatus:""},e}return Object(o["a"])(a,[{key:"pageInfo",get:function(){return{name:"adminOilClean",title:"加油点结清记录"}}},{key:"defaultRoleColumns",value:function(){return[{text:"未结清",value:{settleName:"未结清",settleStatus:"0"}},{text:"已结清",value:{settleName:"已结清",settleStatus:"1"}}]}},{key:"dynamicColumns",get:function(){return this.columns}},{key:"handlerPicker",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.columns=[],this.loading=!0,this.showPicker=!this.showPicker,a=this.defaultRoleColumns(),!["1","2"].includes(t)){e.next=9;break}return e.next=7,Object(m["d"])();case 7:a=e.sent,a=a.map((function(e){return{text:"1"===t?e.name:e.gasName,value:{name:e.name,nameId:e._id,oilName:e.gasName,oilId:e.gasId,proxyFee:e.gasProxyFee}}}));case 9:this.columns=a,this.loading=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"scene",get:function(){return this.$route.query.scene}},{key:"onSubmit",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Number(this.formObj.chargeTunnage)<=0)){e.next=3;break}return this.$toast("吨数不能小于0"),e.abrupt("return");case 3:if("update"===this.scene){e.next=10;break}return e.next=6,Object(p["a"])({isEncrypt:!0,jsonObject:this.formObj});case 6:e.sent,this.$toast("添加成功"),e.next=14;break;case 10:return e.next=12,Object(p["l"])({isEncrypt:!0,jsonObject:this.formObj});case 12:e.sent,this.$toast("编辑成功");case 14:this.$router.push({name:"oilClean"});case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onConfirm",value:function(e){this.formObj=Object(i["a"])(Object(i["a"])({},this.formObj),e.value),this.showPicker=!this.showPicker}},{key:"chargeTunnageInput",value:function(e){this.formObj.chargeLnum=new d["BigNumber"](e).multipliedBy("1180").toString()}},{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("update"!==this.scene){e.next=5;break}return e.next=3,Object(p["i"])(this.$route.query.id);case 3:t=e.sent,this.formObj=t;case 5:this.pageLoading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["c"]);j=Object(h["a"])([Object(f["a"])({components:{JumpToPageVue:v["a"],Loading:O["a"]}})],j);var y=j,k=y,x=(a("7f37"),a("2877")),w=Object(x["a"])(k,n,r,!1,null,"5c2ac7a9",null);t["default"]=w.exports},8900:function(e,t,a){"use strict";a("7219")},"8baf":function(e,t,a){e.exports=a.p+"static/img/records.66c3f1de.svg"},"8bcd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-dropdown-menu",[a("van-dropdown-item",{key:1,attrs:{options:e.oilOption},on:{change:e.oilChange},model:{value:e.oilvalue,callback:function(t){e.oilvalue=t},expression:"oilvalue"}}),a("van-dropdown-item",{key:2,attrs:{options:e.carsOption},on:{change:e.carChange},model:{value:e.carValue,callback:function(t){e.carValue=t},expression:"carValue"}})],1),a("div",{staticClass:"form-date",on:{click:e.toggleDate}},[a("div",[a("span",[e._v(e._s(e.timeFormat(e.nowDate,"YYYY年MM月")))]),a("van-icon",{attrs:{name:"arrow-down"}})],1),a("span",[e._v(e._s(e.getTotalLnum))])]),a("van-list",{staticClass:"container common-list",attrs:{finished:e.gasFinished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.gasLoading,callback:function(t){e.gasLoading=t},expression:"gasLoading"}},e._l(e.gasRecord,(function(t,n){return a("van-swipe-cell",{key:n},[a("van-collapse",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("van-collapse-item",{attrs:{name:n},scopedSlots:e._u([{key:"title",fn:function(){return[a("div",{staticClass:"title"},[a("div",[e._v(" "+e._s(t.carNo)+" ")]),a("div",[e._v(" "+e._s(t.oilLnum+"升")+" ")]),a("div",{staticClass:"edit-gas-record",on:{click:function(a){return e.editGasRecord(t)}}},[e._v("编辑")])])]},proxy:!0}],null,!0)},[a("van-field",{attrs:{label:"车队名称",value:t.carName,readonly:""}}),a("van-field",{attrs:{label:"加油点",value:t.oilName,readonly:""}}),a("van-field",{attrs:{label:"加油时间",value:e.timeFormat(t.createdAt,"YYYY年MM月DD号 HH:mm:ss"),readonly:""}}),t.oilImg?a("van-field",{attrs:{name:"uploader",label:"加油图片",readonly:""},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-uploader",{attrs:{disabled:"","max-count":"1",deletable:!1},model:{value:t.oilImg,callback:function(a){e.$set(t,"oilImg",a)},expression:"gasItem.oilImg"}})]},proxy:!0}],null,!0)}):e._e(),a("van-field",{attrs:{label:"手机号",readonly:""},scopedSlots:e._u([{key:"input",fn:function(){return[a("a",{attrs:{href:"tel:"+t.phone}},[e._v(e._s(t.phone))])]},proxy:!0}],null,!0)})],1)],1)],1)})),1),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.isShowDate,callback:function(t){e.isShowDate=t},expression:"isShowDate"}},[a("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月日","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.confirm,cancel:e.cancel},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1)},r=[],i=a("5530"),s=a("1da1"),c=a("2909"),o=a("d4ec"),u=a("bee2"),l=a("262e"),h=a("2caf"),f=(a("96cf"),a("99af"),a("d81d"),a("b0c0"),a("7db0"),a("9ab4")),m=a("1b40"),d=a("208a"),p=a("5a0c"),b=a.n(p),g=a("c428"),v=a("77c1"),O=a.n(v),j=a("0215"),y=a("901e"),k=a.n(y),x=function(e){Object(l["a"])(a,e);var t=Object(h["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.isShowDate=!1,e.gasLoading=!1,e.gasFinished=!1,e.carValue="",e.oilvalue="",e.gasRecord=[],e.nowDate=new Date,e.activeName=[],e.currentDate=b()().toDate(),e.minDate=b()().subtract(2,"year").toDate(),e.maxDate=b()().toDate(),e.carsList=[],e.oilList=[],e.serachObj={perPage:10,queryPage:1,carName:"",carId:"",oilName:"",oilId:""},e}return Object(u["a"])(a,[{key:"oilOption",get:function(){return[{text:"加油点名称",value:""}].concat(Object(c["a"])(this.oilList.map((function(e){return{text:e.name,value:e._id}}))))}},{key:"carsOption",get:function(){return[{text:"车队名称",value:""}].concat(Object(c["a"])(this.carsList.map((function(e){return{text:e.name,value:e._id}}))))}},{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.serachObj.isWhole=!0,e.next=3,Object(j["c"])();case 3:return this.carsList=e.sent,e.next=6,Object(d["h"])();case 6:this.oilList=e.sent;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"editGasRecord",value:function(e){this.$router.push({name:"adminGasManage",query:{id:e._id}})}},{key:"onLoad",value:function(){this.serachObj.queryPage+=1,this.getAllOilSitesList()}},{key:"delOilRecord",value:function(e){Object(d["e"])(e._id)}},{key:"serachParams",get:function(){return O()(this.serachObj)}},{key:"confirm",value:function(e){this.nowDate=b()(e).toDate(),this.isShowDate=!1,this.serachObj.isWhole=!0,this.getAllOilSitesList()}},{key:"getTotalLnum",get:function(){var e;if(null!==(e=this.gasRecord)&&void 0!==e&&e.length){var t=this.gasRecord.reduce((function(e,t){return new k.a(e).plus(t.oilLnum)}),0);return"总共"+t+"升"}return""}},{key:"cancel",value:function(){this.isShowDate=!1}},{key:"getDetails",value:function(e){return"".concat(e.carNo," ").concat(this.timeFormat(e.createdAt,"MM月DD号 HH:mm"))}},{key:"timeFormat",value:function(e,t){return b()(e).format(t)}},{key:"toggleDate",value:function(){this.isShowDate=!0}},{key:"getAllOilSitesList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"加油点名称"===this.serachObj.oilName&&delete this.serachObj.oilName,"车队名称"===this.serachObj.carName&&delete this.serachObj.carName,t=this.serachObj.isWhole,this.serachObj.isWhole&&(this.serachObj.perPage=10,this.serachObj.queryPage=1,delete this.serachObj.isWhole),t&&(this.loading=!0),e.prev=5,e.next=8,Object(d["f"])({isEncrypt:!0,jsonObject:Object(i["a"])(Object(i["a"])({},this.serachParams),{},{time:b()(this.nowDate).valueOf()})});case 8:a=e.sent,a=a.map((function(e){return e.oilImg&&(e.oilImg=[{url:e.oilImg}]),e})),t&&(this.loading=!1),a&&a.length<this.serachObj.perPage?this.gasFinished=!0:this.gasFinished=!1,this.gasLoading=!1,this.gasRecord=t?a:[].concat(Object(c["a"])(this.gasRecord),Object(c["a"])(a)),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](5),t&&(this.loading=!1),console.log(e.t0,"error");case 20:case"end":return e.stop()}}),e,this,[[5,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"carChange",value:function(e){var t=this.carsList.find((function(t){return t._id===e}))||{};t&&(t={carName:t.name,carId:t._id}),this.serachObj=Object(i["a"])(Object(i["a"])(Object(i["a"])({},this.serachObj),t),{},{isWhole:!0}),this.getAllOilSitesList()}},{key:"oilChange",value:function(e){var t=this.oilList.find((function(t){return t._id===e}))||{};t&&(t={oilName:t.name,oilId:t._id}),this.serachObj=Object(i["a"])(Object(i["a"])(Object(i["a"])({},this.serachObj),t),{},{isWhole:!0}),this.getAllOilSitesList()}}]),a}(m["c"]);x=Object(f["a"])([Object(m["a"])({components:{Loading:g["a"]}})],x);var w=x,R=w,L=(a("8900"),a("2877")),C=Object(L["a"])(R,n,r,!1,null,"5284a87f",null);t["default"]=C.exports},"8f93":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("1da1"),r=(a("96cf"),a("78b1"));function i(e){return s.apply(this,arguments)}function s(){return s=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].post("/upload",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}},"952b":function(e,t,a){},9733:function(e,t,a){"use strict";a("d069")},"97b8":function(e,t,a){e.exports=a.p+"static/img/oilQuantityMonitor.17e48a8f.svg"},"9bea":function(e,t,a){"use strict";a("ed01")},"9cb4":function(e,t,a){"use strict";a("b592")},a224:function(e,t,a){},b483:function(e,t,a){"use strict";a("be91")},b592:function(e,t,a){},b5b6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.pageLoading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-form",{staticClass:"container",on:{submit:e.throttleSubmit}},[a("van-field",{staticClass:"field",attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.formObj.name,callback:function(t){e.$set(e.formObj,"name",t)},expression:"formObj.name"}}),a("van-field",{staticClass:"field",attrs:{name:"手机号",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请输入手机号"}]},model:{value:e.formObj.phone,callback:function(t){e.$set(e.formObj,"phone",t)},expression:"formObj.phone"}}),a("van-field",{staticClass:"field",attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.freeName,label:"冻结状态",placeholder:"点击选择冻结状态",rules:[{required:!0,message:"请选择冻结状态"}]},on:{click:function(t){return e.handlerPicker("10")}}}),"update"!==e.scene?a("van-field",{staticClass:"field",attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.formObj.password,callback:function(t){e.$set(e.formObj,"password",t)},expression:"formObj.password"}}):e._e(),"update"!==e.scene?a("van-field",{staticClass:"field",attrs:{type:"password",name:"确认密码",label:"确认密码",placeholder:"确认密码",rules:[{required:!0,message:"确认密码"}]},model:{value:e.formObj.confirmPassWord,callback:function(t){e.$set(e.formObj,"confirmPassWord",t)},expression:"formObj.confirmPassWord"}}):e._e(),a("van-field",{staticClass:"field",attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.roleName,label:"角色",placeholder:"点击选择角色",rules:[{required:!0,message:"请选择角色"}]},on:{click:function(t){return e.handlerPicker("11")}}}),["1","2"].includes(e.currentRole)?a("van-field",{staticClass:"field",attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.carName,label:"车队",placeholder:"点击选择车队",rules:[{required:!0,message:"请选择车队"}]},on:{click:function(t){return e.handlerPicker("1")}}}):e._e(),"3"===e.currentRole?a("van-field",{staticClass:"field",attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.gasName,label:"加油点",placeholder:"点击选择加油点",rules:[{required:!0,message:"请选择加油点"}]},on:{click:function(t){return e.handlerPicker("3")}}}):e._e(),"2"===e.currentRole?a("van-field",{staticClass:"field",attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.gasModeName,label:"加油模式",placeholder:"加油模式",rules:[{required:!0,message:"请选择加油模式"}]},on:{click:function(t){return e.handlerPicker("12")}}}):e._e(),"2"===e.currentRole?a("van-field",{staticClass:"field",attrs:{name:"车牌号",label:"车牌号",placeholder:"车牌号",rules:[{required:!0,message:"请填写车牌号"}]},model:{value:e.formObj.carNo,callback:function(t){e.$set(e.formObj,"carNo",t)},expression:"formObj.carNo"}}):e._e(),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:e.dynamicColumns,loading:e.loading},on:{confirm:e.onConfirm,cancel:function(t){e.showPicker=!1}}})],1),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1)],1),a("JumpToPageVue",{staticClass:"jump-to-page",attrs:{pageInfo:e.pageInfo}})],1)},r=[],i=a("ade3"),s=a("5530"),c=a("15fd"),o=a("1da1"),u=a("d4ec"),l=a("bee2"),h=a("262e"),f=a("2caf"),m=(a("96cf"),a("498a"),a("99af"),a("b0c0"),a("caad"),a("d81d"),a("9ab4")),d=a("1b40"),p=a("0215"),b=a("208a"),g=a("b8f0"),v=a("b047"),O=a.n(v),j=a("bd9f"),y=a("c428"),k=a("901e"),x=a.n(k),w=a("18b7"),R=["confirmPassWord"],L=function(e){Object(h["a"])(a,e);var t=Object(f["a"])(a);function a(){var e;return Object(u["a"])(this,a),e=t.apply(this,arguments),e.showPicker=!1,e.pageLoading=!0,e.loading=!1,e.columns=[],e.value="",e.formObj={name:"",phone:"",freeName:"未冻结",freeStatus:"0",password:"",confirmPassWord:"",roleName:"",roleNo:"",carNo:"",gasMode:"",gasModeName:"",availableLum:"0",carName:"",carId:"",carProxyFee:"",gasName:"",gasId:"",gasProxyFee:""},e.newFormObj={},e.throttleSubmit=O()((function(){e.onSubmit()}),500),e}return Object(l["a"])(a,[{key:"pageInfo",get:function(){return{name:"adminUsers",title:"用户记录"}}},{key:"defaultRoleColumns",value:function(e){var t=[];switch(e){case"10":t=[{text:"未冻结",value:{freeName:"未冻结",freeStatus:"0"}},{text:"已冻结",value:{freeName:"已冻结",freeStatus:"1"}}];break;case"11":t=[{text:"管理员",value:{roleName:"管理员",roleNo:"0"}},{text:"车队",value:{roleName:"车队",roleNo:"1"}},{text:"驾驶员",value:{roleName:"驾驶员",roleNo:"2"}},{text:"加油工",value:{roleName:"加油工",roleNo:"3"}}];break;default:t=[{text:"分油",value:{gasModeName:"分油",gasMode:"divide"}},{text:"共享",value:{gasModeName:"共享",gasMode:"public"}}];break}return t}},{key:"dynamicColumns",get:function(){return this.columns}},{key:"onSubmit",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("update"===this.scene){e.next=3;break}if(this.formObj.password.trim()===this.formObj.confirmPassWord.trim()){e.next=3;break}return e.abrupt("return",this.$toast("密码不一致,请重新填写"));case 3:this.$dialog.confirm({title:"",message:"<div>".concat("update"!==this.scene?"添加":"修改",' <span class="focus-text">').concat(this.formObj.name,"</span> 吗?</div>"),beforeClose:this.beforeCloseDialog});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeCloseDialog",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.formObj,n.confirmPassWord,r=Object(c["a"])(n,R),"confirm"!==t){e.next=27;break}if(e.prev=2,"update"===this.scene){e.next=10;break}return e.next=6,Object(g["a"])({isEncrypt:!0,jsonObject:r});case 6:e.sent,this.$toast("添加成功"),e.next=18;break;case 10:if(i=new x.a(this.newFormObj.availableLum).toNumber(),!("divide"===this.newFormObj.gasMode&&"public"===r.gasMode&&i>0)){e.next=14;break}return e.next=14,Object(w["a"])({carId:r.carId,lnum:String(i),gasMode:"div"});case 14:return e.next=16,Object(g["i"])({isEncrypt:!0,jsonObject:r});case 16:e.sent,this.$toast("编辑成功");case 18:a(),this.$router.push({name:"adminUsers"}),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](2),a();case 25:e.next=28;break;case 27:a();case 28:case"end":return e.stop()}}),e,this,[[2,22]])})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"currentRole",get:function(){return this.formObj.roleNo}},{key:"onConfirm",value:function(e){this.formObj=Object(s["a"])(Object(s["a"])({},this.formObj),e.value),["未冻结","已冻结"].includes(e.text)||("0"===this.currentRole?this.formObj=Object(s["a"])(Object(s["a"])({},this.formObj),{carName:"",carId:"",carNo:"",carProxyFee:"",gasName:"",gasId:"",gasProxyFee:""}):"1"===this.currentRole?this.formObj=Object(s["a"])(Object(s["a"])({},this.formObj),{carNo:"",gasName:"",gasId:"",gasProxyFee:""}):"2"===this.currentRole?this.formObj=Object(s["a"])(Object(s["a"])({},this.formObj),{gasName:"",gasId:"",gasProxyFee:""}):"3"===this.currentRole&&(this.formObj=Object(s["a"])(Object(s["a"])({},this.formObj),{carName:"",carId:"",carNo:"",carProxyFee:""}))),this.showPicker=!this.showPicker}},{key:"handlerPicker",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.columns=[],this.loading=!0,this.showPicker=!this.showPicker,a=this.defaultRoleColumns(t),"1"!==t){e.next=10;break}return e.next=7,Object(p["c"])();case 7:a=e.sent,e.next=14;break;case 10:if("3"!==t){e.next=14;break}return e.next=13,Object(b["h"])();case 13:a=e.sent;case 14:["1","3"].includes(t)&&(a=a.map((function(e){var a;return{text:e.name,value:(a={},Object(i["a"])(a,"1"===t?"carName":"gasName",e.name),Object(i["a"])(a,"1"===t?"carId":"gasId",e._id),Object(i["a"])(a,"1"===t?"carProxyFee":"gasProxyFee",e.proxyFee),a)}}))),this.columns=a,this.loading=!1;case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"scene",get:function(){return this.$route.query.scene}},{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("update"!==this.scene){e.next=7;break}return e.next=3,Object(g["f"])(this.$route.query.id);case 3:t=e.sent,this.formObj=t,this.formObj=t,this.newFormObj=Object(s["a"])({},t);case 7:this.pageLoading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(d["c"]);L=Object(m["a"])([Object(d["a"])({components:{JumpToPageVue:j["a"],Loading:y["a"]}})],L);var C=L,P=C,_=(a("1c5c"),a("7d7e"),a("2877")),N=Object(_["a"])(P,n,r,!1,null,"a1e9eb52",null);t["default"]=N.exports},bc10:function(e,t,a){"use strict";a("952b")},be91:function(e,t,a){},c03b:function(e,t,a){e.exports=a.p+"static/img/oilClean.c1d2dd96.svg"},c3c8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper common-list"},[e._l(e.allOilList,(function(t,n){return a("van-swipe-cell",{key:n},[a("van-collapse",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("van-collapse-item",{attrs:{name:n},scopedSlots:e._u([{key:"title",fn:function(){return[a("div",{staticClass:"title"},[a("div",[e._v(" "+e._s(t.gasName)+" ")]),a("div",[e._v(" 代价费: "+e._s(t.gasProxyFee)+" 毛 ")])])]},proxy:!0}],null,!0)},[a("div",{staticClass:"qr"},[a("vue-qr",{attrs:{colorDark:"#4994df",text:e.getQrInfo(t._id),size:200}})],1)])],1)],1)})),a("div",{staticClass:"tips"},[e._v(" 没有更多了, "),a("span",{staticClass:"add-gas",on:{click:e.addGasSite}},[e._v("点击这里添加更多加油点")])])],2)},r=[],i=a("1da1"),s=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),l=(a("96cf"),a("b0c0"),a("9ab4")),h=a("1b40"),f=a("208a"),m=a("b8f0"),d=a("c428"),p=a("658f"),b=a.n(p),g=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.loading=!0,e.activeName=[],e.allOilList=[],e}return Object(c["a"])(a,[{key:"delOilItemById",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$dialog.confirm({title:"删除用户",message:"确定要删除 ".concat(t.name," 吗 ?")}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["d"])(t._id);case 2:a.$toast("删除成功");case 3:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addGasSite",value:function(){this.$router.push({path:"/admin-add-oil"})}},{key:"getQrInfo",value:function(e){return"https://www.cxt.net.cn/#/driver-gas-manage?toPage=driverGasManage&userId="+e}},{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["e"])({isWhole:!0,roleNo:"3"});case 2:t=e.sent,this.allOilList=t,this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(h["c"]);g=Object(l["a"])([Object(h["a"])({components:{Loading:d["a"],VueQr:b.a}})],g);var v=g,O=v,j=(a("c61e"),a("2877")),y=Object(j["a"])(O,n,r,!1,null,"0a79d8a6",null);t["default"]=y.exports},c61e:function(e,t,a){"use strict";a("1eb3")},c8d2:function(e,t,a){var n=a("5e77").PROPER,r=a("d039"),i=a("5899"),s="​᠎";e.exports=function(e){return r((function(){return!!i[e]()||s[e]()!==s||n&&i[e].name!==e}))}},ccd9:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-dropdown-menu",[a("van-dropdown-item",{key:1,attrs:{options:e.settleOption},on:{change:e.settleChange},model:{value:e.settleCalue,callback:function(t){e.settleCalue=t},expression:"settleCalue"}}),a("van-dropdown-item",{key:2,attrs:{options:e.oilOption},on:{change:e.oilChange},model:{value:e.oilvalue,callback:function(t){e.oilvalue=t},expression:"oilvalue"}})],1),a("div",{staticClass:"form-date",on:{click:e.toggleDate}},[a("div",[a("span",[e._v(e._s(e.timeFormat(e.nowDate,"YYYY年MM月")))]),a("van-icon",{attrs:{name:"arrow-down"}})],1),a("span",[e._v(e._s(e.totalTunnage))]),a("span",[e._v(e._s(e.getProxyPree))])]),a("van-list",{staticClass:"container common-list",attrs:{finished:e.rechargeFinished},on:{load:e.onLoad},scopedSlots:e._u([{key:"finished",fn:function(){return[e._v(" 没有更多了, "),a("span",{staticClass:"add-recharge",on:{click:e.manageOil}},[e._v("点击这里添加")])]},proxy:!0}]),model:{value:e.rechargeLoading,callback:function(t){e.rechargeLoading=t},expression:"rechargeLoading"}},e._l(e.rechargesList,(function(t,n){return a("van-swipe-cell",{key:n,scopedSlots:e._u([{key:"right",fn:function(){return[a("div",{staticClass:"more"},[a("van-button",{attrs:{square:"",type:"primary",text:"编辑"},on:{click:function(a){return e.editReachrgeItemById(t._id)}}})],1)]},proxy:!0}],null,!0)},[a("van-cell",{attrs:{title:t.name,value:t.chargeTunnage+"吨",label:e.timeFormat(t.createdAt,"YYYY-MM-DD HH:mm:ss")}})],1)})),1),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.isShowDate,callback:function(t){e.isShowDate=t},expression:"isShowDate"}},[a("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月日","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.confirm,cancel:e.cancel},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1)},r=[],i=a("2909"),s=a("1da1"),c=a("5530"),o=a("d4ec"),u=a("bee2"),l=a("262e"),h=a("2caf"),f=(a("96cf"),a("4de4"),a("d3b7"),a("25f0"),a("7db0"),a("b0c0"),a("99af"),a("d81d"),a("9ab4")),m=a("1b40"),d=a("208a"),p=a("5a0c"),b=a.n(p),g=a("901e"),v=a("c428"),O=a("77c1"),j=a.n(O),y=function(e){Object(l["a"])(a,e);var t=Object(h["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!0,e.isShowDate=!1,e.rechargeLoading=!1,e.rechargeFinished=!1,e.settleCalue="",e.oilvalue="",e.nowDate=new Date,e.currentDate=b()().toDate(),e.minDate=b()().subtract(2,"year").toDate(),e.maxDate=b()().toDate(),e.settleOption=[{text:"结清状态",value:""},{text:"未结清",value:"0"},{text:"已结清",value:"1"}],e.serachObj={perPage:10,queryPage:1,settleName:"",settleStatus:"",carName:"",carId:""},e.rechargesList=[],e.oilList=[],e}return Object(u["a"])(a,[{key:"toggleDate",value:function(){this.isShowDate=!0}},{key:"getProxyPree",get:function(){return"1"===this.settleCalue?"":"代加费".concat(this.shouldRepayAmount,"元")}},{key:"shouldRepayAmount",get:function(){var e=this.rechargesList.filter((function(e){return"0"===e.settleStatus})).reduce((function(e,t){return new g["BigNumber"](e).plus(new g["BigNumber"](t.chargeLnum).multipliedBy(t.proxyFee).div(10).toString()).toString()}),0);return e}},{key:"onLoad",value:function(){this.serachObj.queryPage+=1,this.getAllOilRecordRecords()}},{key:"totalTunnage",get:function(){var e;if(null!==(e=this.rechargesList)&&void 0!==e&&e.length){var t=this.rechargesList.reduce((function(e,t){return new g["BigNumber"](e).plus(t.chargeTunnage)}),0);return"总共 ".concat(t," 吨")}return""}},{key:"oilChange",value:function(e){var t=this.oilList.find((function(t){return t._id===e}))||{};t&&(t={oilName:t.name,oilId:t._id}),this.serachObj=Object(c["a"])(Object(c["a"])(Object(c["a"])({},this.serachObj),t),{},{isWhole:!0}),this.getAllOilRecordRecords()}},{key:"manageOil",value:function(){this.$router.push({path:"/admin-oil-clean-manage",query:{scene:"add"}})}},{key:"confirm",value:function(e){this.nowDate=b()(e).toDate(),this.isShowDate=!1,this.serachObj.isWhole=!0,this.getAllOilRecordRecords()}},{key:"cancel",value:function(){this.isShowDate=!1}},{key:"timeFormat",value:function(e,t){return b()(e).format(t)}},{key:"serachParams",get:function(){return j()(this.serachObj)}},{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.serachObj.isWhole=!0,this.getAllOilRecordRecords(),e.next=4,Object(d["h"])();case 4:this.oilList=e.sent;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"delOilCleanRecord",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$dialog.confirm({title:"删除用户",message:"确定要删除 ".concat(t.name," 吗 ?")}).then(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["c"])(t._id);case 2:a.$toast("删除成功"),a.serachObj.isWhole=!0,a.getAllOilRecordRecords();case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAllOilRecordRecords",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"结清状态"===this.serachObj.settleName&&delete this.serachObj.settleName,"加油点名称"===this.serachObj.oilName&&delete this.serachObj.oilName,t=this.serachObj.isWhole,this.serachObj.isWhole&&(this.serachObj.perPage=10,this.serachObj.queryPage=1,delete this.serachObj.isWhole),t&&(this.loading=!0),e.prev=5,e.next=8,Object(d["g"])({isEncrypt:!0,jsonObject:Object(c["a"])(Object(c["a"])({},this.serachParams),{},{time:b()(this.nowDate).valueOf()})});case 8:a=e.sent,t&&(this.loading=!1),a&&a.length<this.serachObj.perPage?this.rechargeFinished=!0:this.rechargeFinished=!1,this.rechargeLoading=!1,this.rechargesList=t?a:[].concat(Object(i["a"])(this.rechargesList),Object(i["a"])(a)),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](5),t&&(this.loading=!1),console.log(e.t0,"error");case 19:case"end":return e.stop()}}),e,this,[[5,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"oilOption",get:function(){return[{text:"加油点名称",value:""}].concat(Object(i["a"])(this.oilList.map((function(e){return{text:e.name,value:e._id}}))))}},{key:"editReachrgeItemById",value:function(e){this.$router.push({path:"/admin-oil-clean-manage",query:{id:e,scene:"update"}})}},{key:"settleChange",value:function(e){var t=this.settleOption.find((function(t){return t.value===e}))||{};t&&(t={settleName:t.text,settleStatus:t.value}),this.serachObj=Object(c["a"])(Object(c["a"])(Object(c["a"])({},this.serachObj),t),{},{isWhole:!0}),this.getAllOilRecordRecords()}}]),a}(m["c"]);y=Object(f["a"])([Object(m["a"])({components:{Loading:v["a"]}})],y);var k=y,x=k,w=(a("66fb"),a("2877")),R=Object(w["a"])(x,n,r,!1,null,"6d706cf5",null);t["default"]=R.exports},d069:function(e,t,a){},d0bc:function(e,t,a){"use strict";a("e49e")},d5e2:function(e,t,a){},d831:function(e,t,a){e.exports=a.p+"static/img/oils.7c32ca9c.svg"},e49e:function(e,t,a){},e9e4:function(e,t,a){},ed01:function(e,t,a){},ee4b:function(e,t,a){"use strict";a("e9e4")},f286:function(e,t,a){},f36a:function(e,t,a){"use strict";a("5ccd")},f619:function(e,t,a){"use strict";a("50e5")}}]);