(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["carOwner"],{"0080":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-dropdown-menu",[a("van-dropdown-item",{key:2,attrs:{options:e.divideOption},on:{change:e.divideChange},model:{value:e.divideValue,callback:function(t){e.divideValue=t},expression:"divideValue"}})],1),a("div",{staticClass:"form-date",on:{click:e.toggleDate}},[a("div",[a("span",[e._v(e._s(e.timeFormat(e.nowDate,"YYYY年MM月")))]),a("van-icon",{attrs:{name:"arrow-down"}})],1)]),a("div",[a("van-field",{staticClass:"field",attrs:{center:"",clearable:"",placeholder:"请输入关键字"},scopedSlots:e._u([{key:"button",fn:function(){return[a("van-button",{attrs:{type:"danger"},on:{click:e.onConfirm}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.valueKey,callback:function(t){e.valueKey=t},expression:"valueKey"}})],1),a("van-list",{staticClass:"container common-list",attrs:{finished:e.gasFinished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.gasLoading,callback:function(t){e.gasLoading=t},expression:"gasLoading"}},e._l(e.gasRecord,(function(t,n){return a("van-swipe-cell",{key:n},[a("van-cell",{attrs:{title:t.carNo,label:e.timeFormat(t.createdAt,"YYYY-MM-DD HH:mm:ss")}},["div"===t.mode?a("div",{staticClass:"up-lnum"},[e._v(" "+e._s(e.lnumText(t))+" ")]):a("div",{staticClass:"down-lnum"},[e._v(" "+e._s(e.lnumText(t))+" ")])])],1)})),1),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.isShowDate,callback:function(t){e.isShowDate=t},expression:"isShowDate"}},[a("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月日","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.confirm,cancel:e.cancel},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1)},r=[],i=a("2909"),s=a("1da1"),c=a("5530"),o=a("d4ec"),u=a("bee2"),l=a("262e"),d=a("2caf"),h=(a("96cf"),a("d3b7"),a("25f0"),a("b680"),a("99af"),a("9ab4")),f=a("1b40"),m=a("5a0c"),v=a.n(m),g=a("c428"),p=a("77c1"),b=a.n(p),y=a("75e6"),O=a("c50c"),j=a("901e"),k=a.n(j),w=function(e){Object(l["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.isShowDate=!1,e.valueKey="",e.gasLoading=!1,e.gasFinished=!1,e.divideValue="",e.gasRecord=[],e.nowDate=new Date,e.activeName=[],e.currentDate=v()().toDate(),e.minDate=v()().subtract(2,"year").toDate(),e.maxDate=v()().toDate(),e.oilList=[],e.serachObj={perPage:10,queryPage:0,mode:"",carNo:""},e}return Object(u["a"])(a,[{key:"lnumText",value:function(e){return("div"===e.mode?"+":"-")+new k.a(e.lum).toFixed(2).toString()+"升"}},{key:"divideOption",get:function(){return[{text:"扣-分油",value:""},{text:"扣油",value:"div"},{text:"分油",value:"divide"}]}},{key:"onLoad",value:function(){this.serachObj.queryPage+=1,this.getOilDivideRecord()}},{key:"onConfirm",value:function(){this.serachObj=Object(c["a"])(Object(c["a"])({},this.serachObj),{},{perPage:10,queryPage:1}),this.getOilDivideRecord()}},{key:"serachParams",get:function(){var e=b()(this.serachObj);return this.valueKey&&(e.valueKey=this.valueKey),e}},{key:"confirm",value:function(e){this.nowDate=v()(e).toDate(),this.isShowDate=!1,this.serachObj.queryPage=1,this.getOilDivideRecord()}},{key:"cancel",value:function(){this.isShowDate=!1}},{key:"getDetails",value:function(e){return"".concat(e.carNo," ").concat(this.timeFormat(e.createdAt,"MM月DD号 HH:mm"))}},{key:"timeFormat",value:function(e,t){return v()(e).format(t)}},{key:"toggleDate",value:function(){this.isShowDate=!0}},{key:"getOilDivideRecord",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"加油点名称"===this.serachObj.oilName&&delete this.serachObj.oilName,t=Object(O["a"])("userInfo"),e.prev=2,e.next=5,Object(y["a"])({isEncrypt:!0,jsonObject:Object(c["a"])(Object(c["a"])({},this.serachParams),{},{time:v()(this.nowDate).valueOf(),carId:t.carId})});case 5:a=e.sent,a&&a.length<this.serachObj.perPage?this.gasFinished=!0:this.gasFinished=!1,this.gasLoading=!1,1===this.serachObj.queryPage?this.gasRecord=a:this.gasRecord=[].concat(Object(i["a"])(this.gasRecord),Object(i["a"])(a)),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](2);case 13:case"end":return e.stop()}}),e,this,[[2,11]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"divideChange",value:function(e){this.serachObj=Object(c["a"])(Object(c["a"])({},this.serachObj),{},{mode:e}),this.serachObj.queryPage=1,this.getOilDivideRecord()}}]),a}(f["c"]);w=Object(h["a"])([Object(f["a"])({components:{Loading:g["a"]}})],w);var x=w,L=x,D=(a("7f29"),a("2877")),_=Object(D["a"])(L,n,r,!1,null,"2f923fa0",null);t["default"]=_.exports},"03f7":function(e,t,a){"use strict";a("1b7c")},"06af":function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return d}));var n=a("15fd"),r=a("1da1"),i=(a("96cf"),a("99af"),a("78b1")),s=["perPage","queryPage"];function c(e){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,c,o,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.perPage,r=void 0===a?10:a,c=t.queryPage,o=void 0===c?1:c,u=Object(n["a"])(t,s),e.next=3,i["a"].post("/users/getCurrentUserAllDrivesList?per_page=".concat(r,"&query_page=").concat(o),u);case 3:return l=e.sent,e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/users/getCurrentUser");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/users/updateMany",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}},"0ac9":function(e,t,a){"use strict";a("8079")},"122c":function(e,t,a){"use strict";a("a43d")},"16e8":function(e,t,a){},"1b7c":function(e,t,a){},"1bfb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-dropdown-menu",[a("van-dropdown-item",{attrs:{options:e.newNameOption},on:{change:e.nameChange},model:{value:e.nameValue,callback:function(t){e.nameValue=t},expression:"nameValue"}})],1),a("van-list",{staticClass:"common-list",attrs:{finished:e.userFinished},on:{load:e.onLoad},scopedSlots:e._u([{key:"finished",fn:function(){return[e._v(" 没有更多了, "),a("span",{staticClass:"add-user",on:{click:e.addUser}},[e._v("点击这里添加更多用户")])]},proxy:!0}]),model:{value:e.userLoading,callback:function(t){e.userLoading=t},expression:"userLoading"}},e._l(e.usersList,(function(t,n){return a("van-swipe-cell",{key:n,scopedSlots:e._u([{key:"right",fn:function(){return[a("van-button",{attrs:{square:"",type:"danger",text:"删除"},on:{click:function(a){return e.delUserItemById(t)}}}),a("van-button",{attrs:{square:"",type:"primary",text:"编辑"},on:{click:function(a){return e.editUserItemById(t._id)}}})]},proxy:!0}],null,!0)},[a("van-cell",{attrs:{title:t.name,label:t.carNo}},[a("div",{staticClass:"extra-info"},[a("a",{attrs:{href:"tel:"+t.phone}},[e._v(e._s(t.phone))]),a("span",{staticClass:"gas-mode-class"},[e._v(" "+e._s(t.gasModeName)+" ")])])])],1)})),1)],1)},r=[],i=a("1da1"),s=a("2909"),c=a("d4ec"),o=a("bee2"),u=a("262e"),l=a("2caf"),d=(a("96cf"),a("99af"),a("d81d"),a("b0c0"),a("9ab4")),h=a("1b40"),f=a("06af"),m=a("b8f0"),v=a("c428"),g=a("77c1"),p=a.n(g),b=a("901e"),y=a.n(b),O=a("c50c"),j=a("18b7"),k=function(e){Object(u["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.usersList=[],e.usersALl=[],e.nameValue="",e.roleVlue="",e.loading=!0,e.userLoading=!1,e.userFinished=!1,e.nameOption=[{text:"全部",value:""}],e.serachform={perPage:10,queryPage:1,name:""},e}return Object(o["a"])(a,[{key:"newNameOption",get:function(){var e=[{text:"全部",value:""}];return this.usersALl.length&&(e=[].concat(Object(s["a"])(e),Object(s["a"])(this.usersALl.map((function(e){return{text:e.name,value:e.name}}))))),e}},{key:"nameChange",value:function(e){this.serachform.name=e,this.getUsersByCondition({isWhole:!0,name:e})}},{key:"getUsersByCondition",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isWhole&&(this.serachform={perPage:10,queryPage:1,name:this.serachform.name}),e.next=3,Object(f["b"])(this.serachParams);case 3:a=e.sent,a&&a.length<this.serachform.perPage?this.userFinished=!0:this.userFinished=!1,this.usersList=a;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"serachParams",get:function(){return p()(this.serachform)}},{key:"onLoad",value:function(){this.serachform.queryPage+=1,this.getAllUserList()}},{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["b"])(this.serachParams);case 2:return t=e.sent,e.next=5,Object(f["b"])({isWhole:!0});case 5:a=e.sent,this.usersALl=a,this.usersList=t,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAllUserList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f["b"])(this.serachParams);case 3:t=e.sent,t&&t.length<this.serachform.perPage?this.userFinished=!0:this.userFinished=!1,this.userLoading=!1,this.usersList=[].concat(Object(s["a"])(this.usersList),Object(s["a"])(t)),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0,"error");case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"delUserItemById",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$dialog.confirm({title:"删除用户",message:"确定要删除 ".concat(t.name," 用户吗 ?")}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=new y.a(t.availableLum).toNumber(),!("divide"===t.gasMode&&n>0)){e.next=5;break}return r=Object(O["a"])("userInfo"),e.next=5,Object(j["a"])({carId:r.carId,lnum:String(n),gasMode:"div"});case 5:return e.next=7,Object(m["b"])(t._id);case 7:return a.$toast("删除成功"),a.getUsersByCondition({isWhole:!0}),e.next=11,Object(f["b"])({isWhole:!0});case 11:i=e.sent,a.usersALl=i;case 13:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addUser",value:function(){this.$router.push({path:"/car-manage-drives",query:{scene:"add"}})}},{key:"editUserItemById",value:function(e){this.$router.push({path:"/car-manage-drives",query:{id:e,scene:"update"}})}}]),a}(h["c"]);k=Object(d["a"])([Object(h["a"])({components:{Loading:v["a"]}})],k);var w=k,x=w,L=(a("7ab0"),a("2877")),D=Object(L["a"])(x,n,r,!1,null,"155d5d58",null);t["default"]=D.exports},2116:function(e,t,a){},2532:function(e,t,a){"use strict";var n=a("23e7"),r=a("5a34"),i=a("1d80"),s=a("577e"),c=a("ab13");n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~s(i(this)).indexOf(s(r(e)),arguments.length>1?arguments[1]:void 0)}})},"283a":function(e,t,a){},"28ac":function(e,t,a){},"28fc":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"logo-text"},[e._v(" 车行通 ")]),a("div",{staticClass:"lnum"},[e._v(" 我的升数: "+e._s(e.tweeningValue)+" ")]),a("div",{staticClass:"container"},[a("van-grid",{attrs:{"column-num":2,gutter:20}},e._l(e.grids,(function(t,n){return a("van-grid-item",{key:n,attrs:{icon:t.img,text:t.name},on:{click:function(a){return e.jumpPage(t.page)}}})})),1)],1),a("div",{staticClass:"other"},[a("van-cell",{staticClass:"divide-oil",attrs:{title:"分油记录","is-link":""},on:{click:function(t){return e.jumpPage("carDivideOil")}}}),a("van-cell",{staticClass:"updata-password",attrs:{title:"修改密码","is-link":""},on:{click:function(t){return e.jumpPage("password")}}})],1),a("LoginOut",{staticClass:"login-out"})],1)},r=[],i=a("1da1"),s=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),l=(a("96cf"),a("b680"),a("9ab4")),d=a("1b40"),h=a("4e5f"),f=a("468c"),m=a("d90f"),v=a("f1e3"),g=a("c50c"),p=function(e){Object(o["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.usersIcon=a("2728"),e.recordsIcon=a("8baf"),e.chargesIcon=a("5d1b"),e.oilsIcon=a("d831"),e.tweeningValue="0",e.grids=[{name:"驾驶员",page:"carManageDrives",img:e.usersIcon},{name:"分油管理",page:"carOilDivideManage",img:e.oilsIcon},{name:"加油记录页",page:"carDriverGas",img:e.recordsIcon},{name:"充值记录页",page:"carRecharge",img:e.chargesIcon}],e.gasInfo=null,e}return Object(c["a"])(n,[{key:"avaliableLnum",get:function(){var e;return(null===(e=this.gasInfo)||void 0===e?void 0:e.avaliableLnum)||0}},{key:"updateValue",value:function(e){this.tweeningValue=Object(m["a"])(e.object.tweeningValue).toFixed(2)}},{key:"created",value:function(){}},{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(g["a"])("userInfo"),e.next=3,Object(h["b"])({isEncrypt:!0,jsonObject:{carId:t.carId,carName:t.carName}});case 3:a=e.sent,this.gasInfo=a,Object(f["a"])(0,this.avaliableLnum,this.updateValue);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"jumpPage",value:function(e){this.$router.push({name:e})}}]),n}(d["c"]);p=Object(l["a"])([Object(d["a"])({components:{LoginOut:v["a"]}})],p);var b=p,y=b,O=(a("60fe"),a("2877")),j=Object(O["a"])(y,n,r,!1,null,"4e0a01f9",null);t["default"]=j.exports},"2a6b":function(e,t,a){"use strict";a("283a")},"468c":function(e,t,a){"use strict";a("d3b7"),a("3ca3"),a("ddb0");var n=1500,r=500,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e7,i=arguments.length>2?arguments[2]:void 0;a.e("es6-tween").then(a.t.bind(null,"de48",7)).then((function(a){var s=a.Tween,c=a.update;function o(){c()&&requestAnimationFrame(o)}var u=new s({tweeningValue:e}).to({tweeningValue:t},n).on("update",(function(){i(u)})).delay(r).start();o()}))};t["a"]=i},"493a":function(e,t,a){},"507c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-dropdown-menu",[a("van-dropdown-item",{key:1,attrs:{options:e.settleOption},on:{change:e.settleChange},model:{value:e.settleCalue,callback:function(t){e.settleCalue=t},expression:"settleCalue"}})],1),a("div",{staticClass:"form-date",on:{click:e.toggleDate}},[a("div",[a("span",[e._v(e._s(e.timeFormat(e.nowDate,"YYYY年MM月")))]),a("van-icon",{attrs:{name:"arrow-down"}})],1),a("span",[e._v(e._s(e.getProxyPree))])]),a("van-list",{staticClass:"container common-list",attrs:{finished:e.rechargeFinished},on:{load:e.onLoad},model:{value:e.rechargeLoading,callback:function(t){e.rechargeLoading=t},expression:"rechargeLoading"}},e._l(e.rechargesList,(function(t,n){return a("van-swipe-cell",{key:n},[a("van-cell",{attrs:{title:t.name,value:e.floatByNum(t.chargeTunnage)+"吨",label:e.timeFormat(t.createdAt,"YYYY-MM-DD HH:mm:ss")}})],1)})),1),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.isShowDate,callback:function(t){e.isShowDate=t},expression:"isShowDate"}},[a("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月日","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.confirm,cancel:e.cancel},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1)},r=[],i=a("2909"),s=a("5530"),c=a("1da1"),o=a("d4ec"),u=a("bee2"),l=a("262e"),d=a("2caf"),h=(a("96cf"),a("d3b7"),a("25f0"),a("4de4"),a("99af"),a("7db0"),a("9ab4")),f=a("1b40"),m=a("15fd"),v=a("78b1"),g=["perPage","queryPage"];function p(e){return b.apply(this,arguments)}function b(){return b=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,i,s,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.jsonObject,n=a.perPage,r=void 0===n?10:n,i=a.queryPage,s=void 0===i?1:i,c=Object(m["a"])(a,g),e.next=3,v["a"].post("/recharges/getCurrentUserRechargesList?per_page=".concat(r,"&query_page=").concat(s),c);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var y=a("5a0c"),O=a.n(y),j=a("901e"),k=a("c428"),w=a("77c1"),x=a.n(w),L=a("4416"),D=function(e){Object(l["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!0,e.settleCalue="",e.isShowDate=!1,e.rechargeLoading=!1,e.rechargeFinished=!1,e.nowDate=new Date,e.currentDate=O()().toDate(),e.minDate=O()().subtract(2,"year").toDate(),e.maxDate=O()().toDate(),e.settleOption=[{text:"结清状态",value:""},{text:"未结清",value:"0"},{text:"已结清",value:"1"}],e.serachObj={perPage:10,queryPage:1,settleName:"",settleStatus:""},e.rechargesList=[],e}return Object(u["a"])(a,[{key:"onLoad",value:function(){this.serachObj.queryPage+=1,this.getAllRechargesList()}},{key:"getProxyPree",get:function(){return"1"===this.settleCalue?"":"应还代加费".concat(this.shouldRepayAmount,"元")}},{key:"toggleDate",value:function(){this.isShowDate=!0}},{key:"floatByNum",value:function(e,t){return Object(L["a"])(e,t)}},{key:"confirm",value:function(e){this.nowDate=O()(e).toDate(),this.isShowDate=!1,this.serachObj.isWhole=!0,this.getAllRechargesList()}},{key:"cancel",value:function(){this.isShowDate=!1}},{key:"totalTunnage",get:function(){var e=this.rechargesList.reduce((function(e,t){return new j["BigNumber"](e).plus(t.chargeTunnage)}),0);return e}},{key:"totalLnum",get:function(){return new j["BigNumber"](this.totalTunnage).multipliedBy("1180").toString()}},{key:"shouldRepayAmount",get:function(){var e=this.rechargesList.filter((function(e){return"0"===e.settleStatus})).reduce((function(e,t){return new j["BigNumber"](e).plus(new j["BigNumber"](t.chargeLnum).multipliedBy(t.proxyFee).div(10).toString()).toString()}),0);return this.floatByNum(e,0)}},{key:"serachParams",get:function(){return x()(this.serachObj)}},{key:"timeFormat",value:function(e,t){return O()(e).format(t)}},{key:"created",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.serachObj.isWhole=!0,this.getAllRechargesList();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAllRechargesList",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"结清状态"===this.serachObj.settleName&&delete this.serachObj.settleName,t=this.serachObj.isWhole,this.serachObj.isWhole&&(this.serachObj.perPage=10,this.serachObj.queryPage=1,delete this.serachObj.isWhole),t&&(this.loading=!0),e.prev=4,e.next=7,p({isEncrypt:!0,jsonObject:Object(s["a"])(Object(s["a"])({},this.serachParams),{},{time:O()(this.nowDate).valueOf()})});case 7:a=e.sent,t&&(this.loading=!1),a&&a.length<this.serachObj.perPage?this.rechargeFinished=!0:this.rechargeFinished=!1,this.rechargeLoading=!1,this.rechargesList=t?a:[].concat(Object(i["a"])(this.rechargesList),Object(i["a"])(a)),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](4),t&&(this.loading=!1),console.log(e.t0,"error");case 18:case"end":return e.stop()}}),e,this,[[4,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"settleChange",value:function(e){var t=this.settleOption.find((function(t){return t.value===e}))||{};t&&(t={settleName:t.text,settleStatus:t.value}),this.serachObj=Object(s["a"])(Object(s["a"])(Object(s["a"])({},this.serachObj),t),{},{isWhole:!0}),this.getAllRechargesList()}}]),a}(f["c"]);D=Object(h["a"])([Object(f["a"])({components:{Loading:k["a"]}})],D);var _=D,C=_,I=(a("0ac9"),a("2877")),P=Object(I["a"])(C,n,r,!1,null,"452d5f86",null);t["default"]=P.exports},"528d":function(e,t,a){},"5a34":function(e,t,a){var n=a("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"60fe":function(e,t,a){"use strict";a("2116")},"75e6":function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return u}));var n=a("15fd"),r=a("1da1"),i=(a("99af"),a("96cf"),a("78b1")),s=["perPage","queryPage"];function c(e){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].post("/oilDivideRecord/insertMany",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,c,o,u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.jsonObject,r=a.perPage,c=void 0===r?10:r,o=a.queryPage,u=void 0===o?1:o,l=Object(n["a"])(a,s),e.next=3,i["a"].post("/oilDivideRecord/getOilDivideRecord?per_page=".concat(c,"&query_page=").concat(u),l);case 3:return d=e.sent,e.abrupt("return",d);case 5:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}},"7ab0":function(e,t,a){"use strict";a("528d")},"7f29":function(e,t,a){"use strict";a("28ac")},8079:function(e,t,a){},"86d2":function(e,t,a){"use strict";a("16e8")},a43d:function(e,t,a){},ab13:function(e,t,a){var n=a("b622"),r=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[r]=!1,"/./"[e](t)}catch(n){}}return!1}},c987:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-dropdown-menu",[a("van-dropdown-item",{attrs:{options:e.oilOption},on:{change:e.oilChange},model:{value:e.oilvalue,callback:function(t){e.oilvalue=t},expression:"oilvalue"}})],1),a("div",{staticClass:"form-date",on:{click:e.toggleDate}},[a("div",[a("span",[e._v(e._s(e.timeFormat(e.nowDate,"YYYY年MM月")))]),a("van-icon",{attrs:{name:"arrow-down"}})],1),a("span",[e._v(e._s(e.getTotalLnum))])]),a("div",[a("van-field",{staticClass:"field",attrs:{center:"",clearable:"",placeholder:"请输入关键字"},scopedSlots:e._u([{key:"button",fn:function(){return[a("van-button",{attrs:{type:"danger"},on:{click:e.onConfirm}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.valueKey,callback:function(t){e.valueKey=t},expression:"valueKey"}})],1),a("van-list",{staticClass:"container common-list",attrs:{finished:e.gasFinished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.gasLoading,callback:function(t){e.gasLoading=t},expression:"gasLoading"}},e._l(e.gasRecord,(function(t,n){return a("van-swipe-cell",{key:n},[a("div",{staticClass:"gas-item"},[a("div",{staticClass:"top-info"},[a("div",{staticClass:"gas-name"},[e._v(" 加油点："+e._s(t.oilName)+" ")]),a("div",{staticClass:"gas-oil-num"},[e._v(" "+e._s(t.oilLnum)+"升 ")])]),a("div",{staticClass:"bottom-info"},[a("div",{staticClass:"gas-time"},[e._v(" "+e._s(e.timeFormat(t.createdAt,"YYYY-MM-DD HH:mm:ss"))+" ")]),a("div",{staticClass:"car-no"},[e._v(" "+e._s(t.carNo)+" ")])])])])})),1),a("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.isShowDate,callback:function(t){e.isShowDate=t},expression:"isShowDate"}},[a("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月日","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.confirm,cancel:e.cancel},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1)},r=[],i=a("1da1"),s=a("2909"),c=a("5530"),o=a("d4ec"),u=a("bee2"),l=a("262e"),d=a("2caf"),h=(a("96cf"),a("99af"),a("d81d"),a("b0c0"),a("7db0"),a("9ab4")),f=a("1b40"),m=a("18b7"),v=a("5a0c"),g=a.n(v),p=a("c428"),b=a("77c1"),y=a.n(b),O=a("208a"),j=a("901e"),k=a.n(j),w=function(e){Object(l["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.isShowDate=!1,e.gasLoading=!1,e.gasFinished=!1,e.oilvalue="",e.gasRecord=[],e.nowDate=new Date,e.activeName=[],e.valueKey="",e.currentDate=g()().toDate(),e.minDate=g()().subtract(2,"year").toDate(),e.maxDate=g()().toDate(),e.oilList=[],e.serachObj={perPage:10,queryPage:0,oilName:"",oilId:"",userId:"",carNo:""},e}return Object(u["a"])(a,[{key:"onConfirm",value:function(){this.serachObj=Object(c["a"])(Object(c["a"])({},this.serachObj),{},{perPage:10,queryPage:1}),this.getAllOilSitesList()}},{key:"oilOption",get:function(){return[{text:"加油点名称",value:""}].concat(Object(s["a"])(this.oilList.map((function(e){return{text:e.name,value:e._id}}))))}},{key:"getTotalLnum",get:function(){var e;if(null!==(e=this.gasRecord)&&void 0!==e&&e.length){var t=this.gasRecord.reduce((function(e,t){return new k.a(e).plus(t.oilLnum)}),0);return"总共"+t+"升"}return""}},{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["h"])();case 2:this.oilList=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onLoad",value:function(){this.serachObj.queryPage+=1,this.getAllOilSitesList()}},{key:"serachParams",get:function(){var e=y()(this.serachObj);return this.valueKey&&(e.valueKey=this.valueKey),e}},{key:"confirm",value:function(e){this.nowDate=g()(e).toDate(),this.isShowDate=!1,this.getAllOilSitesList()}},{key:"cancel",value:function(){this.isShowDate=!1}},{key:"getDetails",value:function(e){return"".concat(e.carNo," ").concat(this.timeFormat(e.createdAt,"MM月DD号 HH:mm"))}},{key:"timeFormat",value:function(e,t){return g()(e).format(t)}},{key:"toggleDate",value:function(){this.isShowDate=!0}},{key:"getAllOilSitesList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"加油点名称"===this.serachObj.oilName&&delete this.serachObj.oilName,e.prev=1,e.next=4,Object(m["b"])({isEncrypt:!0,jsonObject:Object(c["a"])(Object(c["a"])({},this.serachParams),{},{time:g()(this.nowDate).valueOf()})});case 4:t=e.sent,t=t.map((function(e){return e.oilImg&&(e.oilImg=[{url:e.oilImg}]),e})),t&&t.length<this.serachObj.perPage?this.gasFinished=!0:this.gasFinished=!1,this.gasLoading=!1,1===this.serachObj.queryPage?this.gasRecord=t:this.gasRecord=[].concat(Object(s["a"])(this.gasRecord),Object(s["a"])(t)),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log(e.t0,"error");case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"oilChange",value:function(e){var t=this.oilList.find((function(t){return t._id===e}))||{};t&&(t={oilName:t.name,oilId:t._id}),this.serachObj=Object(c["a"])(Object(c["a"])(Object(c["a"])({},this.serachObj),t),{},{perPage:10,queryPage:1}),this.getAllOilSitesList()}}]),a}(f["c"]);w=Object(h["a"])([Object(f["a"])({components:{Loading:p["a"]}})],w);var x=w,L=x,D=(a("03f7"),a("2877")),_=Object(D["a"])(L,n,r,!1,null,"7a689704",null);t["default"]=_.exports},cc78:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-grid",{staticClass:"grid",attrs:{"column-num":2}},e._l(e.grids,(function(t,n){return a("van-grid-item",{key:n,scopedSlots:e._u([{key:"icon",fn:function(){return[a("p",{staticClass:"title"},[e._v(" "+e._s(t.name))])]},proxy:!0},{key:"text",fn:function(){return["可分配"===t.name?a("p",{staticClass:"subtitle"},[e._v(e._s(e.ableUseValue)+"升")]):a("p",{staticClass:"subtitle"},[e._v(" "+e._s(e.alredyUseValue)+"升")])]},proxy:!0}],null,!0)})})),1),a("van-field",{staticClass:"field",attrs:{center:"",clearable:"",placeholder:"请输入关键字"},scopedSlots:e._u([{key:"button",fn:function(){return[a("van-button",{attrs:{type:"danger"},on:{click:e.onConfirm}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.valueKey,callback:function(t){e.valueKey=t},expression:"valueKey"}}),a("ul",{staticClass:"common-list list"},e._l(e.usersList,(function(t,n){return a("li",{key:n,staticClass:"item",class:{"item-activited":e.isActivited(t._id)},on:{click:function(a){return e.clickUserItem(t)}}},[a("div",{staticClass:"cars"},[a("p",{staticClass:"card-title"},[e._v(" "+e._s(t.carNo)+" ")]),a("p",{staticClass:"card-title"},[e._v(" 剩余"),a("span",{staticClass:"focus-text"},[e._v(e._s(e.carAvaliableLnum(t.availableLum)))]),e._v("升")]),a("p",{staticClass:"card-title"},[e._v(" "+e._s(t.name)+" ")])])])})),0),a("div",{staticClass:"btns"},[a("van-button",{staticClass:"btn",attrs:{size:"large",type:"danger"},on:{click:function(t){return e.submit("add")}}},[e._v("分油")]),e._v("      "),a("van-button",{staticClass:"btn",attrs:{size:"large",type:"danger"},on:{click:function(t){return e.submit("div")}}},[e._v("扣油")])],1),a("van-dialog",{attrs:{title:e.dialogInfo.title,"show-cancel-button":""},on:{confirm:e.dialogConfirm},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}},[a("div",{staticClass:"dialog-content"},e._l(e.dialogInfo.contentData,(function(e,t){return a("van-cell",{key:t,attrs:{title:e.name,value:e.carNo}})})),1),a("van-field",{staticClass:"field",attrs:{type:"number","input-align":"right",label:e.dialogInfo.title+"升数",placeholder:"请输入"+e.dialogInfo.title+"升数"},model:{value:e.lnum,callback:function(t){e.lnum=t},expression:"lnum"}})],1)],1)},r=[],i=a("1da1"),s=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),l=(a("96cf"),a("d3b7"),a("25f0"),a("b680"),a("a9e3"),a("4de4"),a("caad"),a("2532"),a("d81d"),a("b0c0"),a("9ab4")),d=a("1b40"),h=a("06af"),f=a("c428"),m=a("77c1"),v=a.n(m),g=a("d90f"),p=a("c50c"),b=a("4e5f"),y=a("468c"),O=a("901e"),j=a.n(O),k=a("18b7"),w=a("75e6"),x=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.grids=[{name:"可分配"},{name:"已分配"}],e.valueKey="",e.ableUseValue="0",e.alredyUseValue="0",e.usersList=[],e.lnum="",e.usersALl=[],e.dialogShow=!1,e.roleVlue="",e.loading=!0,e.gasInfo=null,e.selectedIdx=[],e.oilFlag="",e.nameOption=[{text:"全部",value:""}],e.serachform={perPage:10,queryPage:1,name:"",gasMode:"divide"},e}return Object(c["a"])(a,[{key:"getTotalLnum",get:function(){var e;if(null!==(e=this.usersList)&&void 0!==e&&e.length){var t=this.usersList.reduce((function(e,t){return new j.a(e).plus(t.availableLum)}),0).toNumber();return t}return 0}},{key:"onConfirm",value:function(){this.getUsersByCondition()}},{key:"avaliableLnum",get:function(){var e;return(null===(e=this.gasInfo)||void 0===e?void 0:e.avaliableLnum)||0}},{key:"carAvaliableLnum",value:function(e){return new j.a(e).toFixed(2).toString()}},{key:"updateValue",value:function(e){this.ableUseValue=Object(g["a"])(e.object.tweeningValue).toFixed(2)}},{key:"updateValue1",value:function(e){this.alredyUseValue=Object(g["a"])(e.object.tweeningValue).toFixed(2)}},{key:"mounted",value:function(){this.queryCarOwnerGasInfo()}},{key:"queryCarOwnerGasInfo",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(p["a"])("userInfo"),e.next=3,Object(b["b"])({isEncrypt:!0,jsonObject:{carId:t.carId,carName:t.carName}});case 3:a=e.sent,this.loading=!1,this.gasInfo=a,Object(y["a"])(0,this.avaliableLnum,this.updateValue);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"submit",value:function(e){this.oilFlag=e,this.selectedIdx.length?"div"!==e&&Number(this.ableUseValue)<=0?this.$toast("对不起！请先充值 !"):this.dialogShow=!0:this.$toast("没有选中车辆")}},{key:"dialogInfo",get:function(){var e=this;return{title:"div"===this.oilFlag?"扣油":"分油",contentData:this.usersList.filter((function(t){return e.selectedIdx.includes(t._id)}))}}},{key:"dialogConfirm",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.lnum){e.next=3;break}return this.$toast("请输入".concat(this.dialogInfo.title,"升数")),e.abrupt("return");case 3:if(!(Number(this.lnum)<=0)){e.next=6;break}return this.$toast("".concat(this.dialogInfo.title,"升数不能小于0")),e.abrupt("return");case 6:return e.next=8,this.getUsersByCondition();case 8:"div"!==this.oilFlag?this.handleAddOil():this.handleDivOil();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleAddOil",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=new j.a(this.ableUseValue),a=new j.a(this.lnum).multipliedBy(this.selectedIdx.length).toNumber(),n=t.minus(a).toNumber(),!(n<0)){e.next=6;break}return this.$toast("可分配的升数不足，请先充值 !"),e.abrupt("return");case 6:return r=this.usersList.filter((function(e){return s.selectedIdx.includes(e._id)})),this.loading=!0,e.next=10,Object(h["c"])({data:r.map((function(e){return{_id:e._id,availableLum:new j.a(s.lnum).plus(e.availableLum).toFixed(2).toString()}}))});case 10:return i=Object(p["a"])("userInfo"),e.next=13,Object(k["a"])({carId:i.carId,lnum:String(a),gasMode:"divide"});case 13:return e.next=15,Object(w["b"])({data:r.map((function(e){return{mode:"divide",lum:s.lnum,name:e.name,phone:e.phone,roleName:e.roleName,roleNo:e.roleNo,carName:e.carName,carId:e.carId,carProxyFee:e.carProxyFee,carNo:e.carNo}}))});case 15:return e.next=17,this.getUsersByCondition();case 17:return e.next=19,this.queryCarOwnerGasInfo();case 19:this.selectedIdx=[],this.lnum="",this.$toast("分油成功"),this.loading=!1;case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleDivOil",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i,s,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.usersList.filter((function(e){return c.selectedIdx.includes(e._id)})),a=t.filter((function(e){return Number(e.availableLum)<Number(c.lnum)})),!a.length){e.next=8;break}for(n="",r=0;r<a.length;r++)n+='<div class="handle-div-oil"><span class="focus-text">'.concat(a[r].carNo,"</span>剩余升数不足</div>");this.$dialog.alert({title:"扣油失败原因",message:n,theme:"round-button"}).then((function(){})),e.next=25;break;case 8:return this.loading=!0,e.next=11,Object(h["c"])({data:t.map((function(e){return{_id:e._id,availableLum:new j.a(e.availableLum).minus(c.lnum).toFixed(2).toString()}}))});case 11:return i=Object(p["a"])("userInfo"),s=new j.a(this.lnum).multipliedBy(this.selectedIdx.length).toString(),e.next=15,Object(k["a"])({carId:i.carId,lnum:s,gasMode:"div"});case 15:return e.next=17,Object(w["b"])({data:t.map((function(e){return{mode:"div",lum:c.lnum,name:e.name,phone:e.phone,roleName:e.roleName,roleNo:e.roleNo,carName:e.carName,carId:e.carId,carProxyFee:e.carProxyFee,carNo:e.carNo}}))});case 17:return e.next=19,this.getUsersByCondition();case 19:return e.next=21,this.queryCarOwnerGasInfo();case 21:this.selectedIdx=[],this.lnum="",this.$toast("扣油成功"),this.loading=!1;case 25:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isActivited",value:function(e){return this.selectedIdx.some((function(t){return t===e}))}},{key:"clickUserItem",value:function(e){this.selectedIdx.some((function(t){return t===e._id}))?this.selectedIdx=this.selectedIdx.filter((function(t){return t!==e._id})):this.selectedIdx.push(e._id)}},{key:"getUsersByCondition",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.serachform={isWhole:!0,name:this.serachform.name,gasMode:"divide"},e.next=3,Object(h["b"])(this.serachParams);case 3:t=e.sent,this.usersList=t,this.usersALl.length||(this.usersALl=t),Object(y["a"])(0,this.getTotalLnum,this.updateValue1);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"serachParams",get:function(){var e=v()(this.serachform);return this.valueKey&&(e.valueKey=this.valueKey),e}},{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getUsersByCondition();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(d["c"]);x=Object(l["a"])([Object(d["a"])({components:{Loading:f["a"]}})],x);var L=x,D=L,_=(a("f9f6"),a("122c"),a("2877")),C=Object(_["a"])(D,n,r,!1,null,"764176f3",null);t["default"]=C.exports},d90f:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("9129"),a("a9e3");function n(e){return Number.isNaN(Number(e))?0:Number(e)}},f9f6:function(e,t,a){"use strict";a("493a")},fa35:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.pageLoading?a("Loading"):a("div",{staticClass:"wrapper"},[a("van-form",{staticClass:"container",on:{submit:e.throttleSubmit}},[a("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.formObj.name,callback:function(t){e.$set(e.formObj,"name",t)},expression:"formObj.name"}}),a("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请输入手机号"}]},model:{value:e.formObj.phone,callback:function(t){e.$set(e.formObj,"phone",t)},expression:"formObj.phone"}}),a("van-field",{attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.freeName,label:"冻结状态",placeholder:"点击选择冻结状态",rules:[{required:!0,message:"请选择冻结状态"}]},on:{click:function(t){return e.handlerPicker("10")}}}),a("van-field",{staticClass:"field",attrs:{readonly:"",clickable:"",name:"picker",value:e.formObj.gasModeName,label:"加油模式",placeholder:"加油模式",rules:[{required:!0,message:"请选择加油模式"}]},on:{click:function(t){return e.handlerPicker("12")}}}),"update"!==e.scene?a("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.formObj.password,callback:function(t){e.$set(e.formObj,"password",t)},expression:"formObj.password"}}):e._e(),"update"!==e.scene?a("van-field",{attrs:{type:"password",name:"确认密码",label:"确认密码",placeholder:"确认密码",rules:[{required:!0,message:"确认密码"}]},model:{value:e.formObj.confirmPassWord,callback:function(t){e.$set(e.formObj,"confirmPassWord",t)},expression:"formObj.confirmPassWord"}}):e._e(),a("van-field",{attrs:{name:"车牌号",label:"车牌号",placeholder:"车牌号",rules:[{required:!0,message:"请填写车牌号"}]},model:{value:e.formObj.carNo,callback:function(t){e.$set(e.formObj,"carNo",t)},expression:"formObj.carNo"}}),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:e.dynamicColumns,loading:e.loading},on:{confirm:e.onConfirm,cancel:function(t){e.showPicker=!1}}})],1),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1),a("JumpToPageVue",{attrs:{pageInfo:e.pageInfo}})],1)],1)},r=[],i=a("5530"),s=a("15fd"),c=a("1da1"),o=a("d4ec"),u=a("bee2"),l=a("262e"),d=a("2caf"),h=(a("96cf"),a("498a"),a("99af"),a("b0c0"),a("9ab4")),f=a("1b40"),m=a("b8f0"),v=a("06af"),g=a("b047"),p=a.n(g),b=a("bd9f"),y=a("c428"),O=a("901e"),j=a.n(O),k=a("18b7"),w=["confirmPassWord"],x=function(e){Object(l["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.pageLoading=!1,e.showPicker=!1,e.loading=!1,e.columns=[],e.value="",e.formObj={name:"",phone:"",freeName:"未冻结",freeStatus:"0",password:"",confirmPassWord:"",roleName:"驾驶员",gasMode:"",gasModeName:"",availableLum:"0",roleNo:"2",carNo:"",carName:"",carId:""},e.newFormObj={},e.throttleSubmit=p()((function(){e.onSubmit()}),500),e}return Object(u["a"])(a,[{key:"pageInfo",get:function(){return{name:"carDrives",title:"驾驶员记录"}}},{key:"defaultRoleColumns",value:function(e){var t=[];switch(e){case"10":t=[{text:"未冻结",value:{freeName:"未冻结",freeStatus:"0"}},{text:"已冻结",value:{freeName:"已冻结",freeStatus:"1"}}];break;default:t=[{text:"分油",value:{gasModeName:"分油",gasMode:"divide",availableLum:"0"}},{text:"共享",value:{gasModeName:"共享",gasMode:"public",availableLum:"0"}}];break}return t}},{key:"dynamicColumns",get:function(){return this.columns}},{key:"onSubmit",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("update"===this.scene){e.next=3;break}if(this.formObj.password.trim()===this.formObj.confirmPassWord.trim()){e.next=3;break}return e.abrupt("return",this.$toast("密码不一致,请重新填写"));case 3:this.$dialog.confirm({title:"",message:"<div>".concat("update"!==this.scene?"添加":"修改",' <span class="focus-text">').concat(this.formObj.name,"</span> 吗?</div>"),beforeClose:this.beforeCloseDialog});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeCloseDialog",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.formObj,n.confirmPassWord,r=Object(s["a"])(n,w),"confirm"!==t){e.next=25;break}if(e.prev=2,"update"===this.scene){e.next=9;break}return e.next=6,Object(m["a"])({isEncrypt:!0,jsonObject:Object(i["a"])(Object(i["a"])({},r),{},{carId:this.currentUserInfo.carId,carName:this.currentUserInfo.carName,carProxyFee:this.currentUserInfo.carProxyFee,gasId:this.currentUserInfo.gasId,gasName:this.currentUserInfo.gasName,gasProxyFee:this.currentUserInfo.gasProxyFee})});case 6:this.$toast("添加成功"),e.next=16;break;case 9:if(c=new j.a(this.newFormObj.availableLum).toNumber(),!("divide"===this.newFormObj.gasMode&&"public"===r.gasMode&&c>0)){e.next=13;break}return e.next=13,Object(k["a"])({carId:r.carId,lnum:String(c),gasMode:"div"});case 13:return e.next=15,Object(m["i"])({isEncrypt:!0,jsonObject:r});case 15:this.$toast("编辑成功");case 16:a(),this.$router.push({name:"carDrives"}),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](2),a();case 23:e.next=26;break;case 25:a();case 26:case"end":return e.stop()}}),e,this,[[2,20]])})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"currentRole",get:function(){return this.formObj.roleNo}},{key:"onConfirm",value:function(e){this.formObj=Object(i["a"])(Object(i["a"])({},this.formObj),e.value),this.showPicker=!this.showPicker}},{key:"handlerPicker",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.columns=[],this.loading=!0,this.showPicker=!this.showPicker,a=this.defaultRoleColumns(t),this.columns=a,this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"scene",get:function(){return this.$route.query.scene}},{key:"created",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("update"!==this.scene){e.next=9;break}return e.next=3,Object(m["f"])(this.$route.query.id);case 3:t=e.sent,this.pageLoading=!1,this.formObj=t,this.newFormObj=Object(i["a"])({},t),e.next=12;break;case 9:return e.next=11,Object(v["a"])();case 11:this.currentUserInfo=e.sent;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["c"]);x=Object(h["a"])([Object(f["a"])({components:{JumpToPageVue:b["a"],Loading:y["a"]}})],x);var L=x,D=L,_=(a("2a6b"),a("86d2"),a("2877")),C=Object(_["a"])(D,n,r,!1,null,"6960c6ec",null);t["default"]=C.exports}}]);